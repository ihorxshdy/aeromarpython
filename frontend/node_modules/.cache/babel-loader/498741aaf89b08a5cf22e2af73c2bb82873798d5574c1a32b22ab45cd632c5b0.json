{"ast":null,"code":"import _objectSpread from\"/Users/igordvoretskii/Documents/aeromar-python/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from'react';import{DndContext,DragOverlay,rectIntersection}from'@dnd-kit/core';import{flightAPI,machineAPI}from'./api';import{DAY_START,DAY_END,GRID_STEP,toHHMM}from'./utils';import{DraggableFlight}from'./components/DraggableFlight';import{DroppableMachineSlot}from'./components/DroppableMachineSlot';import{DroppableUnassigned}from'./components/DroppableUnassigned';// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// –ö–∞—Å—Ç–æ–º–Ω—ã–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏\nconst restrictToVerticalAxis=args=>{const{transform,draggingNodeRect,activatorEvent}=args;if(!draggingNodeRect||!activatorEvent){return transform;}return{x:0,// –ë–ª–æ–∫–∏—Ä—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ\ny:transform.y,// –û—Å—Ç–∞–≤–ª—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ\nscaleX:transform.scaleX,scaleY:transform.scaleY};};const PlannerPage=()=>{const[machines,setMachines]=useState([]);const[flights,setFlights]=useState([]);const[autolifts,setAutolifts]=useState([]);// –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\nconst[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Drag and Drop —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nconst[activeFlight,setActiveFlight]=useState(null);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\nconst[pendingChanges,setPendingChanges]=useState([]);const[showSaveDialog,setShowSaveDialog]=useState(false);// –í–æ–¥–∏—Ç–µ–ª–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω\nconst[drivers,setDrivers]=useState([]);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –≤—Ä–µ–º–µ–Ω —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª–µ–π\nconst[customShiftTimes,setCustomShiftTimes]=useState({});// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—ã—Å–æ—Ç—ã –ø–æ–¥–≤–∞–ª–∞\nconst[basementHeight,setBasementHeight]=useState(120);// –í—ã—Å–æ—Ç–∞ –¥–ª—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤\nconst[isResizing,setIsResizing]=useState(false);// –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\nconst[horizontalScale,setHorizontalScale]=useState(1);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫–æ–Ω –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ\nconst[chainWindows,setChainWindows]=useState({});// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏\nconst[chainAutolifts,setChainAutolifts]=useState({});// –°—Ç–∞—Ç—É—Å—ã —Ä–µ–π—Å–æ–≤\nconst[flightStatuses,setFlightStatuses]=useState({});// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Ä–µ–π—Å–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–æ–∫\nconst[selectedFlights,setSelectedFlights]=useState(new Set());const[isMultiSelectMode,setIsMultiSelectMode]=useState(false);const[selectedChain,setSelectedChain]=useState(null);const[isDragging,setIsDragging]=useState(false);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∑–æ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏\nconst[hoverMachineId,setHoverMachineId]=useState(null);const[timeGapInfo,setTimeGapInfo]=useState(null);// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–π—Å–∞\nconst getFlightStatus=flight=>{return flightStatuses[flight.flightNo]||'planned';};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–π—Å–∞\nconst updateFlightStatus=(flightNo,status)=>{setFlightStatuses(prev=>_objectSpread(_objectSpread({},prev),{},{[flightNo]:status}));};// –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏\nuseEffect(()=>{const loadData=async()=>{try{setLoading(true);console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...');const[machinesData,flightsData,autoliftsResponse]=await Promise.all([machineAPI.getMachines(),flightAPI.getFlights(),fetch('/autolifts.csv')// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\n]);console.log('‚úÖ –ú–∞—à–∏–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:',machinesData.length);console.log('‚úÖ –†–µ–π—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:',flightsData.length);setMachines(machinesData);setFlights(flightsData);// –ü–∞—Ä—Å–∏–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã –∏–∑ CSV\ntry{const autoliftsText=await autoliftsResponse.text();console.log('üìÑ –°—ã—Ä–æ–π —Ç–µ–∫—Å—Ç –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤:',autoliftsText.substring(0,200));const autoliftsData=autoliftsText.split('\\n').slice(1)// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫\n.map(line=>line.trim()).filter(line=>line.length>0);console.log('‚úÖ –ê–≤—Ç–æ–ª–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:',autoliftsData);setAutolifts(autoliftsData);}catch(e){console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫:',e);// –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\nconst fallbackAutolifts=['133','135','136','139','140','141','149','150','151','152','153','154','155','156','157','158','159','160'];setAutolifts(fallbackAutolifts);}// –°–æ–∑–¥–∞–µ–º –≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω\nconst driversData=machinesData.map(machine=>({id:\"driver-\".concat(machine.id),name:machine.driver,machineId:machine.id,shiftStart:machine.shiftStart,shiftEnd:machine.shiftEnd}));setDrivers(driversData);// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Ä–µ–º–µ–Ω–∞ —Å–º–µ–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\nconst defaultTimes={};driversData.forEach(driver=>{defaultTimes[driver.id]={shiftStart:driver.shiftStart,shiftEnd:driver.shiftEnd};});setCustomShiftTimes(defaultTimes);console.log('‚úÖ –í–æ–¥–∏—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã:',driversData.length);// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –∏–∑ localStorage\nconst savedChains=localStorage.getItem('flight-chains');if(savedChains){try{const chainData=JSON.parse(savedChains);console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏:',Object.keys(chainData).length);// –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ chainId –∫ —Ä–µ–π—Å–∞–º\nconst updatedFlights=flightsData.map(flight=>_objectSpread(_objectSpread({},flight),{},{chainId:chainData[flight.id]||flight.chainId||''}));setFlights(updatedFlights);}catch(e){console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫:',e);}}// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã –¥–ª—è —Ü–µ–ø–æ—á–µ–∫\nconst savedAutolifts=localStorage.getItem('chain-autolifts');if(savedAutolifts){try{const autoliftData=JSON.parse(savedAutolifts);console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã:',Object.keys(autoliftData).length);setChainAutolifts(autoliftData);}catch(e){console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤:',e);}}}catch(err){console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:',err);setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');}finally{setLoading(false);}};loadData();},[]);// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\nuseEffect(()=>{if(flights.length>0){const chainData={};flights.forEach(flight=>{if(flight.chainId){chainData[flight.id]=flight.chainId;}});localStorage.setItem('flight-chains',JSON.stringify(chainData));console.log('üíæ –¶–µ–ø–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');}},[flights]);// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\nuseEffect(()=>{localStorage.setItem('chain-autolifts',JSON.stringify(chainAutolifts));console.log('üíæ –ê–≤—Ç–æ–ª–∏—Ñ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');},[chainAutolifts]);// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–∞ –∏–∑ –º–∞—à–∏–Ω—ã\nconst getAutoliftFromMachine=machineId=>{const machine=machines.find(m=>m.id===machineId);if(!machine)return'';// –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–º–µ—Ä –∏–∑ ID –º–∞—à–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"M133\" -> \"133\")\nconst autoliftNumber=machine.id.replace('M','');return autoliftNumber;};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–≤—Ç–æ–ª–∏—Ñ—Ç–∞ —Ü–µ–ø–æ—á–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\nconst autoAssignAutolift=(chainId,machineId)=>{// –ï—Å–ª–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω, –Ω–µ –º–µ–Ω—è–µ–º\nif(chainAutolifts[chainId])return;const autoliftNumber=getAutoliftFromMachine(machineId);if(autoliftNumber){setChainAutolifts(prev=>_objectSpread(_objectSpread({},prev),{},{[chainId]:autoliftNumber}));console.log(\"\\uD83D\\uDD27 \\u0410\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438 \\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D \\u0430\\u0432\\u0442\\u043E\\u043B\\u0438\\u0444\\u0442 \".concat(autoliftNumber,\" \\u0434\\u043B\\u044F \\u0446\\u0435\\u043F\\u043E\\u0447\\u043A\\u0438 \").concat(chainId));}};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)\nconst getDriverShiftTime=driverId=>{return customShiftTimes[driverId]||drivers.find(d=>d.id===driverId)||{shiftStart:6*60,shiftEnd:22*60};};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–º–µ–Ω—ã\nconst calculateShiftDuration=(shiftStart,shiftEnd)=>{const duration=shiftEnd-shiftStart;const hours=Math.floor(duration/60);const minutes=duration%60;return\"\".concat(hours,\"\\u0447 \").concat(minutes>0?minutes+'–º':'').trim();};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—è\nconst updateDriverShiftTime=(driverId,field,value)=>{setCustomShiftTimes(prev=>_objectSpread(_objectSpread({},prev),{},{[driverId]:_objectSpread(_objectSpread({},prev[driverId]),{},{[field]:value})}));};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –∏–º–µ–Ω–∏ –¥–æ —Ñ–æ—Ä–º–∞—Ç–∞ \"–§–∞–º–∏–ª–∏—è –ò.–û.\"\nconst formatDriverName=fullName=>{if(!fullName||fullName.trim()==='')return'–ë–µ–∑ –∏–º–µ–Ω–∏';const parts=fullName.trim().split(/\\s+/);if(parts.length===1)return parts[0];// –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ\nif(parts.length===2){// –ï—Å–ª–∏ –¥–≤–∞ —Å–ª–æ–≤–∞: \"–§–∞–º–∏–ª–∏—è –ò–º—è\" -> \"–§–∞–º–∏–ª–∏—è –ò.\"\nconst surname=parts[0];const firstName=parts[1];return\"\".concat(surname,\" \").concat(firstName.charAt(0).toUpperCase(),\".\");}if(parts.length>=3){// –ï—Å–ª–∏ —Ç—Ä–∏ –∏–ª–∏ –±–æ–ª—å—à–µ —Å–ª–æ–≤: \"–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ\" -> \"–§–∞–º–∏–ª–∏—è –ò.–û.\"\nconst surname=parts[0];const firstName=parts[1];const middleName=parts[2];return\"\".concat(surname,\" \").concat(firstName.charAt(0).toUpperCase(),\".\").concat(middleName.charAt(0).toUpperCase(),\".\");}return fullName;// Fallback\n};// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫\nconst DRIVER_INFO_WIDTH=140;// –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–æ–¥–∏—Ç–µ–ª–µ (—É–º–µ–Ω—å—à–µ–Ω–∞ —Å 160 –¥–æ 140)\nconst MACHINE_SELECT_WIDTH=75;// –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –º–∞—à–∏–Ω—ã (—É–≤–µ–ª–∏—á–µ–Ω–∞ —Å 65 –¥–æ 75)\nconst SHIFT_TIME_WIDTH=95;// –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º —Å–º–µ–Ω—ã (—É–≤–µ–ª–∏—á–µ–Ω–∞ —Å 80 –¥–æ 95)\nconst WORK_DURATION_WIDTH=59;// –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å —Ä–∞—Å—á–µ—Ç–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã (—É–º–µ–Ω—å—à–µ–Ω–∞ —Å 79 –¥–æ 59)\nconst TOTAL_DRIVERS_WIDTH=369;// –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—â–∞—è —à–∏—Ä–∏–Ω–∞ (140 + 75 + 95 + 59 = 369)\n// –ú–∞—Å—à—Ç–∞–± –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\nconst basePxPerMin=4;// –£–≤–µ–ª–∏—á–∏–ª–∏ —Å 2 –¥–æ 4 –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è\nconst pxPerMin=basePxPerMin*horizontalScale;// X - –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ\nconst laneH=55;// –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫ —Å 45 –¥–æ 55 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏\nconst fontPx=Math.max(9,Math.min(11,laneH/5));// –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞\n// –°–∫—Ä–æ–ª–ª –∏ ¬´—Å–µ–π—á–∞—Å¬ª\nconst mainRef=useRef(null);const footRef=useRef(null);const basementRef=useRef(null);// –î–ª—è –ø–æ–¥–≤–∞–ª–∞ —Å –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ —Ä–µ–π—Å–∞–º–∏\nconst driversRef=useRef(null);// –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π\nuseEffect(()=>{// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–æ–π, –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –∏ basement\nconst timer=setTimeout(()=>{const timeHeader=footRef.current;const mainArea=mainRef.current;const basement=basementRef.current;console.log('üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞...');if(!timeHeader||!mainArea||!basement){console.log('‚ùå –ù–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞–π–¥–µ–Ω—ã:',{timeHeader:!!timeHeader,mainArea:!!mainArea,basement:!!basement});return;}let isScrolling=false;// –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ - –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∫—Ä–æ–ª–ª–∞\nconst onMainScroll=()=>{if(isScrolling)return;isScrolling=true;const scrollLeft=mainArea.scrollLeft;// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–¥–≤–∞–ª\nif(timeHeader.scrollLeft!==scrollLeft){timeHeader.scrollLeft=scrollLeft;}if(basement.scrollLeft!==scrollLeft){basement.scrollLeft=scrollLeft;}requestAnimationFrame(()=>{isScrolling=false;});};// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª—É—à–∞—Ç–µ–ª—å - –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É\nmainArea.addEventListener('scroll',onMainScroll,{passive:true});console.log('‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');return()=>{mainArea.removeEventListener('scroll',onMainScroll);};},500);return()=>clearTimeout(timer);},[]);// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –∏ –±–ª–æ–∫–æ–º –≤–æ–¥–∏—Ç–µ–ª–µ–π\nuseEffect(()=>{const mainArea=mainRef.current;const driversArea=driversRef.current;if(!mainArea||!driversArea)return;let isVerticalScrolling=false;const syncScrollTop=(sourceScrollTop,source)=>{if(isVerticalScrolling)return;isVerticalScrolling=true;if(source!=='main')mainArea.scrollTop=sourceScrollTop;if(source!=='drivers')driversArea.scrollTop=sourceScrollTop;requestAnimationFrame(()=>{isVerticalScrolling=false;});};const onMainVerticalScroll=()=>{if(!isVerticalScrolling){syncScrollTop(mainArea.scrollTop,'main');}};const onDriversVerticalScroll=()=>{if(!isVerticalScrolling){syncScrollTop(driversArea.scrollTop,'drivers');}};mainArea.addEventListener('scroll',onMainVerticalScroll);driversArea.addEventListener('scroll',onDriversVerticalScroll);return()=>{mainArea.removeEventListener('scroll',onMainVerticalScroll);driversArea.removeEventListener('scroll',onDriversVerticalScroll);};},[]);const[nowLeft,setNowLeft]=useState(0);useEffect(()=>{const tick=()=>{const d=new Date();const m=d.getHours()*60+d.getMinutes();const left=(m-DAY_START)*pxPerMin;setNowLeft(left);};tick();const timer=setInterval(tick,10000);return()=>clearInterval(timer);},[pxPerMin]);// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–º multi-select\nuseEffect(()=>{const handleKeyDown=event=>{if(event.key==='Escape'&&isMultiSelectMode){clearSelection();console.log('üîÑ –í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ multi-select –ø–æ Escape');}};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[isMultiSelectMode]);// –û—á–∏—Å—Ç–∫–∞ overflow –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\nuseEffect(()=>{return()=>{document.body.style.overflow='';};},[]);// –ò–º–ø–æ—Ä—Ç CSV\nconst fileRef=useRef(null);const[autoAfterImport,setAutoAfterImport]=useState(true);const onPick=()=>{var _fileRef$current;return(_fileRef$current=fileRef.current)===null||_fileRef$current===void 0?void 0:_fileRef$current.click();};const onFile=async e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;try{setLoading(true);setError(null);// –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏\nconsole.log('üìÅ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª:',file.name,'—Ä–∞–∑–º–µ—Ä:',file.size);const importedFlights=await flightAPI.importCSV(file);console.log('‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –ø–æ–ª—É—á–µ–Ω–æ —Ä–µ–π—Å–æ–≤:',importedFlights.length);// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nsetFlights([...importedFlights]);// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞\nif(autoAfterImport){console.log('ü§ñ –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ...');await handleAutoAssign();}// –û—á–∏—â–∞–µ–º input –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞\nif(fileRef.current){fileRef.current.value='';}}catch(err){console.error('‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ CSV:',err);setError(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0438\\u043C\\u043F\\u043E\\u0440\\u0442\\u0430 CSV: \".concat(err instanceof Error?err.message:'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));}finally{setLoading(false);}};// –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ\nconst handleAutoAssign=async()=>{try{setLoading(true);await flightAPI.autoAssign();const updatedFlights=await flightAPI.getFlights();setFlights(updatedFlights);setError(null);}catch(err){setError('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è');console.error(err);}finally{setLoading(false);}};// –°–±—Ä–æ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\nconst handleResetAssign=async()=>{try{setLoading(true);await flightAPI.resetAssignments();const updatedFlights=await flightAPI.getFlights();setFlights(updatedFlights);setError(null);}catch(err){setError('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞');console.error(err);}finally{setLoading(false);}};// –í—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\nconst totalWidth=(DAY_END-DAY_START)*pxPerMin;const gridLines=[];for(let m=DAY_START;m<=DAY_END;m+=GRID_STEP){gridLines.push(m);}// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ä–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–∞–º\nconst flightsByMachine=useMemo(()=>{const byMachine={};machines.forEach(m=>byMachine[m.id]=[]);flights.forEach(f=>{if(f.vehicleId&&f.vehicleId.trim()!==''){byMachine[f.vehicleId]=byMachine[f.vehicleId]||[];byMachine[f.vehicleId].push(f);}});// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏\nObject.values(byMachine).forEach(list=>list.sort((a,b)=>a.serviceStart-b.serviceStart));console.log('üîÑ –†–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–∞–º:',byMachine);console.log('üîÑ –í—Å–µ–≥–æ —Ä–µ–π—Å–æ–≤:',flights.length,'–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö:',flights.filter(f=>f.vehicleId&&f.vehicleId.trim()!=='').length);return byMachine;},[flights,machines]);// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–ª–æ–µ–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ä–µ–π—Å–æ–≤\nconst calculateFlightLayers=useMemo(()=>{const layersByMachine={};Object.entries(flightsByMachine).forEach(_ref=>{let[machineId,machineFlights]=_ref;const flightsWithLayers=[];machineFlights.forEach(flight=>{// –ù–∞—Ö–æ–¥–∏–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–ª–æ–π –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\nlet layer=0;let placed=false;while(!placed){// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Ä–µ–π—Å–∞–º–∏ –Ω–∞ —ç—Ç–æ–º —Å–ª–æ–µ\nconst conflictOnLayer=flightsWithLayers.some(item=>item.layer===layer&&!(flight.serviceEnd<=item.flight.serviceStart||flight.serviceStart>=item.flight.serviceEnd));if(!conflictOnLayer){flightsWithLayers.push({flight,layer});placed=true;}else{layer++;}}});layersByMachine[machineId]=flightsWithLayers;});return layersByMachine;},[flightsByMachine]);// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–æ–µ–≤ –¥–ª—è –º–∞—à–∏–Ω—ã\nconst getLayerCount=machineId=>{const layers=calculateFlightLayers[machineId]||[];return Math.max(1,...layers.map(item=>item.layer+1));};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—è —Ä–µ–π—Å–∞\nconst getFlightLayer=(flightId,machineId)=>{const layers=calculateFlightLayers[machineId]||[];const item=layers.find(item=>item.flight.id===flightId);return(item===null||item===void 0?void 0:item.layer)||0;};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü —Ü–µ–ø–æ—á–∫–∏ –ø–æ —Å–ª–æ—è–º (–≤–µ—Ä—Ö–Ω–∏–π –∏ –Ω–∏–∂–Ω–∏–π —Å–ª–æ–π)\nconst getChainLayerBounds=(chainId,machineId)=>{const layers=calculateFlightLayers[machineId]||[];const chainLayers=layers.filter(item=>item.flight.chainId===chainId).map(item=>item.layer);if(chainLayers.length===0){return{minLayer:0,maxLayer:0,top:0,height:25};}const minLayer=Math.min(...chainLayers);const maxLayer=Math.max(...chainLayers);const totalLayers=getLayerCount(machineId);const flightHeight=laneH-12;// –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Ä–µ–π—Å–∞\nconst layerSpacing=flightHeight+6;// –£–≤–µ–ª–∏—á–∏–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏\nif(totalLayers===1){// –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ–π, —Å–∫–æ–±–∫–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ\nreturn{minLayer:0,maxLayer:0,top:(laneH-25)/2,// –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–∫–æ–±–∫—É —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã\nheight:25// –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Å–∫–æ–±–∫–∏\n};}else{// –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤, —Å–∫–æ–±–∫–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏ —Ü–µ–ø–æ—á–∫–∏\nconst dynamicLaneH=Math.max(laneH,totalLayers*layerSpacing+12);const totalHeight=totalLayers*layerSpacing;const centerY=dynamicLaneH/2;const startY=centerY-totalHeight/2;const chainTop=startY+minLayer*layerSpacing;const chainBottom=startY+maxLayer*layerSpacing+flightHeight;const chainHeight=Math.max(25,chainBottom-chainTop);// –£–≤–µ–ª–∏—á–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É\nreturn{minLayer,maxLayer,top:chainTop,height:chainHeight};}};// –ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ä–µ–π—Å—ã\nconst unassignedFlights=flights.filter(f=>!f.vehicleId||f.vehicleId.trim()==='');// –¶–µ–ø–æ—á–∫–∏/—Å–∫–æ–±–∫–∏ –ø–æ chainId, –æ—Ç kitchenOut –ø–µ—Ä–≤–æ–≥–æ –¥–æ unloadEnd –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ\nconst chainsByMachine=useMemo(()=>{// —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–µ –∏ chainId (–ø—É—Å—Ç—ã–º —Ä–µ–π—Å–∞–º –¥–∞—ë–º —Å–≤–æ–π \"solo-...\" chainId)\nconst byM={};for(const m of machines)byM[m.id]={};for(const f of flights)if(f.vehicleId){var _byM$mid,_byM$mid$cid;const mid=f.vehicleId;const cid=f.chainId&&f.chainId.length?f.chainId:\"solo-\".concat(f.id);((_byM$mid$cid=(_byM$mid=byM[mid])[cid])!==null&&_byM$mid$cid!==void 0?_byM$mid$cid:_byM$mid[cid]=[]).push(f);}const res={};for(const mid of Object.keys(byM)){const chains=byM[mid];const arr=[];for(const cid of Object.keys(chains)){const list=chains[cid].slice().sort((a,b)=>a.serviceStart-b.serviceStart);// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ–±–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ (–Ω–µ solo) –∏ –µ—Å–ª–∏ –≤ —Ü–µ–ø–æ—á–∫–µ –±–æ–ª—å—à–µ 1 —Ä–µ–π—Å–∞\nif(cid.startsWith('solo-')||list.length<2)continue;const start=Math.min(...list.map(x=>x.kitchenOut));const end=Math.max(...list.map(x=>x.unloadEnd));arr.push({chainId:cid,machineId:mid,start:Math.max(DAY_START,start),end:Math.min(DAY_END,end)});}// —Å–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞\narr.sort((a,b)=>a.start-b.start);res[mid]=arr;}return res;},[flights,machines]);// –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ –±–µ–∑ –Ω–∞–ª–æ–∂–µ–Ω–∏–π\nconst arrangeUnassignedFlights=useMemo(()=>{const flightsWithPositions=[...unassignedFlights].sort((a,b)=>a.serviceStart-b.serviceStart);const lanes={};return flightsWithPositions.map(flight=>{let laneIndex=0;// –ù–∞–π–¥–µ–º —Å–≤–æ–±–æ–¥–Ω—É—é –ø–æ–ª–æ—Å—É\nwhile(lanes[laneIndex]){const hasConflict=lanes[laneIndex].some(existing=>!(flight.serviceEnd<=existing.start||flight.serviceStart>=existing.end));if(!hasConflict)break;laneIndex++;}// –î–æ–±–∞–≤–∏–º —Ä–µ–π—Å –≤ —ç—Ç—É –ø–æ–ª–æ—Å—É\nif(!lanes[laneIndex])lanes[laneIndex]=[];lanes[laneIndex].push({start:flight.serviceStart,end:flight.serviceEnd});return _objectSpread(_objectSpread({},flight),{},{laneIndex});});},[unassignedFlights]);// Custom collision detection –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö\nconst customCollisionDetection=args=>{const{droppableRects,droppableContainers,active,pointerCoordinates}=args;if(!pointerCoordinates){return rectIntersection(args);}// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö\nconst unassignedContainer=droppableContainers.find(container=>container.id==='unassigned');if(unassignedContainer){const rect=droppableRects.get('unassigned');if(rect){const isWithinUnassigned=pointerCoordinates.x>=rect.left&&pointerCoordinates.x<=rect.right&&pointerCoordinates.y>=rect.top&&pointerCoordinates.y<=rect.bottom;if(isWithinUnassigned){return[{id:'unassigned'}];}}}// –ï—Å–ª–∏ –Ω–µ –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º\nreturn rectIntersection(args);};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∑–æ—Ä–æ–≤ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Ä–µ–π—Å–∞\nconst calculateTimeGap=(machineId,insertTime)=>{const machineFlights=flightsByMachine[machineId]||[];const sortedFlights=[...machineFlights].sort((a,b)=>a.serviceStart-b.serviceStart);if(!activeFlight)return{machineId};const draggedFlightStart=activeFlight.serviceStart;const draggedFlightEnd=activeFlight.serviceEnd;const draggedFlightDuration=draggedFlightEnd-draggedFlightStart;let beforeFlight;let afterFlight;// –ù–∞—Ö–æ–¥–∏–º —Ä–µ–π—Å—ã –¥–æ –∏ –ø–æ—Å–ª–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Å—Ç–∞–≤–∫–∏\nfor(let i=0;i<sortedFlights.length;i++){const flight=sortedFlights[i];if(flight.serviceStart<=insertTime){beforeFlight=flight;}if(flight.serviceStart>insertTime&&!afterFlight){afterFlight=flight;break;}}const result={machineId};// –í—ã—á–∏—Å–ª—è–µ–º –∑–∞–∑–æ—Ä —Å–ª–µ–≤–∞ –æ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ä–µ–π—Å–∞ (–æ—Ç –Ω–∞—á–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)\nif(beforeFlight){const beforeGap=draggedFlightStart-beforeFlight.serviceEnd;if(beforeGap>=0){result.beforeGap={flight:beforeFlight,gap:beforeGap,insertTime:beforeFlight.serviceEnd};}}else{// –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Ä–µ–π—Å–æ–º\nconst beforeGap=draggedFlightStart-DAY_START;if(beforeGap>=0){result.beforeGap={gap:beforeGap,insertTime:DAY_START};}}// –í—ã—á–∏—Å–ª—è–µ–º –∑–∞–∑–æ—Ä —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ä–µ–π—Å–∞ (–æ—Ç –∫–æ–Ω—Ü–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)\nif(afterFlight){const afterGap=afterFlight.serviceStart-draggedFlightEnd;if(afterGap>=0){result.afterGap={flight:afterFlight,gap:afterGap,insertTime:draggedFlightEnd};}}else{// –ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Å–∞\nconst afterGap=DAY_END-draggedFlightEnd;if(afterGap>=0){result.afterGap={gap:afterGap,insertTime:draggedFlightEnd};}}return result;};const handleDragStart=event=>{const{active}=event;const flight=flights.find(f=>f.id===active.id);if(flight){setActiveFlight(flight);setIsDragging(true);// –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è\ndocument.body.style.overflow='hidden';}};const handleDragOver=event=>{var _over$data$current;const{active,over}=event;if(!active||!over||!activeFlight)return;// –ï—Å–ª–∏ –Ω–∞–≤–æ–¥–∏–º—Å—è –Ω–∞ –º–∞—à–∏–Ω—É, –≤—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–∑–æ—Ä\nif(((_over$data$current=over.data.current)===null||_over$data$current===void 0?void 0:_over$data$current.type)==='machine'){const machineId=over.id;// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ä–µ–π—Å–∞ –∫–∞–∫ –ø–æ–∑–∏—Ü–∏—é –≤—Å—Ç–∞–≤–∫–∏\nconst currentTime=activeFlight.serviceStart;const gapInfo=calculateTimeGap(machineId,currentTime);setTimeGapInfo(gapInfo);setHoverMachineId(machineId);}else{// –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∑–æ—Ä–µ\nsetTimeGapInfo(null);setHoverMachineId(null);}};const handleDragEnd=async event=>{var _over$data$current2,_over$data$current3,_over$data$current4;const{active,over}=event;setActiveFlight(null);setIsDragging(false);setTimeGapInfo(null);// –û—á–∏—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∑–æ—Ä–µ\nsetHoverMachineId(null);// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã\ndocument.body.style.overflow='';console.log('üéØ DragEnd:',{activeId:active.id,overId:over===null||over===void 0?void 0:over.id,overType:over===null||over===void 0?void 0:(_over$data$current2=over.data.current)===null||_over$data$current2===void 0?void 0:_over$data$current2.type});if(!over){return;}const flightId=active.id;const flight=flights.find(f=>f.id===flightId);if(!flight)return;// –ï—Å–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º –Ω–∞ –º–∞—à–∏–Ω—É\nif(((_over$data$current3=over.data.current)===null||_over$data$current3===void 0?void 0:_over$data$current3.type)==='machine'){const machineId=over.id;const machine=machines.find(m=>m.id===machineId);// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–µ –Ω–∞ —Ç—É –∂–µ –º–∞—à–∏–Ω—É)\nif(flight.vehicleId===machineId){return;// –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–æ\n}// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\nconst existingChangeIndex=pendingChanges.findIndex(c=>c.flightId===flight.id);if(existingChangeIndex>=0){// –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nconst existingChange=pendingChanges[existingChangeIndex];// –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é –º–∞—à–∏–Ω—É, —É–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nif(existingChange.originalVehicleId===machineId){setPendingChanges(prev=>prev.filter(c=>c.flightId!==flight.id));setFlights(prev=>prev.map(f=>f.id===flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:machineId}):f));return;}// –ò–Ω–∞—á–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nconst updatedChange=_objectSpread(_objectSpread({},existingChange),{},{toMachine:(machine===null||machine===void 0?void 0:machine.name)||machineId,newVehicleId:machineId});setPendingChanges(prev=>prev.map(c=>c.id===existingChange.id?updatedChange:c));}else{var _machines$find;// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nconst changeId=Date.now().toString();const change={id:changeId,flightId:flight.id,flightNo:flight.flightNo,fromMachine:flight.vehicleId?(_machines$find=machines.find(m=>m.id===flight.vehicleId))===null||_machines$find===void 0?void 0:_machines$find.name:'–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',toMachine:(machine===null||machine===void 0?void 0:machine.name)||machineId,originalVehicleId:flight.vehicleId,newVehicleId:machineId};setPendingChanges(prev=>[...prev,change]);}// –õ–æ–∫–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å\nsetFlights(prev=>prev.map(f=>f.id===flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:machineId}):f));}// –ï—Å–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º –≤ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ\nif(((_over$data$current4=over.data.current)===null||_over$data$current4===void 0?void 0:_over$data$current4.type)==='unassigned'){// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–µ –±—ã–ª –ª–∏ —É–∂–µ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º)\nif(!flight.vehicleId){return;// –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–æ\n}// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\nconst existingChangeIndex=pendingChanges.findIndex(c=>c.flightId===flight.id);if(existingChangeIndex>=0){const existingChange=pendingChanges[existingChangeIndex];// –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é, —É–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nif(!existingChange.originalVehicleId){setPendingChanges(prev=>prev.filter(c=>c.flightId!==flight.id));setFlights(prev=>prev.map(f=>f.id===flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:''}):f));return;}// –ò–Ω–∞—á–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\nconst updatedChange=_objectSpread(_objectSpread({},existingChange),{},{toMachine:'–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',newVehicleId:''});setPendingChanges(prev=>prev.map(c=>c.id===existingChange.id?updatedChange:c));}else{const changeId=Date.now().toString();const machine=machines.find(m=>m.id===flight.vehicleId);const change={id:changeId,flightId:flight.id,flightNo:flight.flightNo,fromMachine:(machine===null||machine===void 0?void 0:machine.name)||flight.vehicleId,toMachine:'–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',originalVehicleId:flight.vehicleId,newVehicleId:''};setPendingChanges(prev=>[...prev,change]);}// –õ–æ–∫–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å\nsetFlights(prev=>prev.map(f=>f.id===flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:''}):f));}};// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\nconst handleRemoveChange=changeId=>{const change=pendingChanges.find(c=>c.id===changeId);if(!change)return;// –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–π—Å –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é\nsetFlights(prev=>prev.map(f=>f.id===change.flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:change.originalVehicleId||''}):f));// –£–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞\nsetPendingChanges(prev=>prev.filter(c=>c.id!==changeId));};const handleApplyChanges=async()=>{try{setLoading(true);// –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\nfor(const change of pendingChanges){if(change.newVehicleId){await flightAPI.assignFlight(change.flightId,change.newVehicleId);}else{await flightAPI.unassignFlight(change.flightId);}}// –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞\nconst updatedFlights=await flightAPI.getFlights();setFlights(updatedFlights);// –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π\nsetPendingChanges([]);setShowSaveDialog(false);}catch(err){setError('–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π');console.error(err);}finally{setLoading(false);}};const handleCancelChanges=()=>{// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ —Ä–µ–π—Å—ã –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é\nlet updatedFlights=[...flights];pendingChanges.forEach(change=>{updatedFlights=updatedFlights.map(f=>f.id===change.flightId?_objectSpread(_objectSpread({},f),{},{vehicleId:change.originalVehicleId||''}):f);});setFlights(updatedFlights);setPendingChanges([]);setShowSaveDialog(false);};// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\n// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –∏ —Å–∫–æ–±–∫–∞–º–∏\nconst toggleFlightSelection=flightId=>{const flight=flights.find(f=>f.id===flightId);if(!flight)return;setSelectedFlights(prev=>{const newSelected=new Set(prev);if(newSelected.has(flightId)){// –£–±–∏—Ä–∞–µ–º —Ä–µ–π—Å –∏–∑ –≤—ã–±–æ—Ä–∞\nnewSelected.delete(flightId);}else{// –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å –≤ –≤—ã–±–æ—Ä, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ\nif(newSelected.size>0){var _selectedFlightObject;// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–π—Å—ã –Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ\nconst selectedFlightIds=Array.from(newSelected);const selectedFlightObjects=flights.filter(f=>selectedFlightIds.includes(f.id));const firstMachine=(_selectedFlightObject=selectedFlightObjects[0])===null||_selectedFlightObject===void 0?void 0:_selectedFlightObject.vehicleId;if(flight.vehicleId!==firstMachine){// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å\nconsole.log('–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å —Ä–µ–π—Å—ã —Å —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω');return prev;// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –Ω–∞–±–æ—Ä –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π\n}}// –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã - –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å\nnewSelected.add(flightId);}return newSelected;});};const clearSelection=()=>{setSelectedFlights(new Set());setIsMultiSelectMode(false);setSelectedChain(null);};const handleChainClick=chainId=>{setSelectedChain(selectedChain===chainId?null:chainId);};const breakSelectedChain=()=>{if(!selectedChain){alert('–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–æ–±–∫—É –¥–ª—è —Ä–∞–∑–±–∏—Ç–∏—è, –∫–ª–∏–∫–Ω—É–≤ –ø–æ –Ω–µ–π');return;}breakChain(selectedChain);setSelectedChain(null);};const createChainFromSelected=()=>{if(selectedFlights.size<2){alert('–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–Ω–∏–º—É–º 2 —Ä–µ–π—Å–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–∫–∏');return;}// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–π—Å—ã –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ\nconst selectedFlightIds=Array.from(selectedFlights);const selectedFlightObjects=flights.filter(f=>selectedFlightIds.includes(f.id));if(selectedFlightObjects.length===0)return;const firstMachine=selectedFlightObjects[0].vehicleId;const allOnSameMachine=selectedFlightObjects.every(f=>f.vehicleId===firstMachine);if(!allOnSameMachine){alert('–í—Å–µ —Ä–µ–π—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–∫–∏');return;}if(!firstMachine){alert('–ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —Å–∫–æ–±–∫—É –¥–ª—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤');return;}// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π chainId\nconst newChainId=\"chain-\".concat(Date.now());// –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å—ã\nsetFlights(prev=>prev.map(f=>selectedFlightIds.includes(f.id)?_objectSpread(_objectSpread({},f),{},{chainId:newChainId}):f));// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\nautoAssignAutolift(newChainId,firstMachine);// –û—á–∏—â–∞–µ–º –≤—ã–±–æ—Ä\nclearSelection();};const breakChain=chainId=>{if(!chainId||chainId.startsWith('solo-'))return;// –£–±–∏—Ä–∞–µ–º chainId —É –≤—Å–µ—Ö —Ä–µ–π—Å–æ–≤ –≤ —ç—Ç–æ–π —Å–∫–æ–±–∫–µ\nsetFlights(prev=>prev.map(f=>f.chainId===chainId?_objectSpread(_objectSpread({},f),{},{chainId:''}):f));};const handleFlightClick=(event,flightId)=>{if(event.shiftKey){setIsMultiSelectMode(true);const flight=flights.find(f=>f.id===flightId);if(!flight)return;// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Ä–µ–π—Å–∞–º–∏\nif(selectedFlights.size>0){var _selectedFlightObject2;const selectedFlightIds=Array.from(selectedFlights);const selectedFlightObjects=flights.filter(f=>selectedFlightIds.includes(f.id));const firstMachine=(_selectedFlightObject2=selectedFlightObjects[0])===null||_selectedFlightObject2===void 0?void 0:_selectedFlightObject2.vehicleId;if(flight.vehicleId!==firstMachine){// –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å - –ø–æ–¥—Å–≤–µ—Ç–∏–º –Ω–µ—É–¥–∞—á–Ω—É—é –ø–æ–ø—ã—Ç–∫—É\nconsole.log('‚ùå –ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å —Ä–µ–π—Å—ã —Å —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω');// –í—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏–º —Ä–µ–π—Å –∫—Ä–∞—Å–Ω—ã–º\nconst element=event.currentTarget;const originalBorder=element.style.border;element.style.border='3px solid #DC2626';element.style.backgroundColor='#FEE2E2';setTimeout(()=>{element.style.border=originalBorder;element.style.backgroundColor='';},500);event.preventDefault();event.stopPropagation();return;}}toggleFlightSelection(flightId);event.preventDefault();event.stopPropagation();}else if(!isMultiSelectMode){// –û–±—ã—á–Ω—ã–π –∫–ª–∏–∫ –±–µ–∑ shift - –æ—á–∏—â–∞–µ–º –≤—ã–±–æ—Ä\nclearSelection();}};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—é\nconst handleDriverMachineChange=(driverId,machineId)=>{setDrivers(prevDrivers=>prevDrivers.map(d=>d.id===driverId?_objectSpread(_objectSpread({},d),{},{machineId:machineId||''}):_objectSpread(_objectSpread({},d),{},{machineId:d.machineId===machineId?'':d.machineId})// –£–±–∏—Ä–∞–µ–º –º–∞—à–∏–Ω—É —É –¥—Ä—É–≥–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π\n));};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã\nconst checkDriverOvertime=driverId=>{const driver=drivers.find(d=>d.id===driverId);if(!driver||!driver.machineId||driver.machineId==='')return false;const machineFlights=flightsByMachine[driver.machineId]||[];if(machineFlights.length===0)return false;const firstFlight=machineFlights[0];const lastFlight=machineFlights[machineFlights.length-1];const shiftTime=getDriverShiftTime(driver.id);return firstFlight.serviceStart<shiftTime.shiftStart||lastFlight.serviceEnd>shiftTime.shiftEnd;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-lg\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})});}return/*#__PURE__*/_jsx(DndContext,{onDragStart:handleDragStart,onDragOver:handleDragOver,onDragEnd:handleDragEnd,onDragCancel:()=>{setActiveFlight(null);setIsDragging(false);setTimeGapInfo(null);setHoverMachineId(null);document.body.style.overflow='';},autoScroll:false,collisionDetection:customCollisionDetection,children:/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col overflow-hidden\",style:{background:'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',cursor:isResizing?'ns-resize':'default'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"shadow-md border-b flex-none z-50\",style:{background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',height:'32px',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",style:{margin:0,lineHeight:'1',color:'#475569'},children:\"\\u0410\\u044D\\u0440\\u043E\\u043C\\u0430\\u0440\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-b px-4 py-2 flex-none z-40\",style:{background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onPick,disabled:loading,className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0418\\u043C\\u043F\\u043E\\u0440\\u0442 CSV \\u0444\\u0430\\u0439\\u043B\\u0430\",children:\"\\u0418\\u043C\\u043F\\u043E\\u0440\\u0442\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileRef,type:\"file\",accept:\".csv\",onChange:onFile,className:\"hidden\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAutoAssign,disabled:loading||flights.length===0,className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0410\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0435 \\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435 \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\",children:\"\\u0410\\u0432\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleResetAssign,disabled:loading,className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0421\\u0431\\u0440\\u043E\\u0441 \\u0432\\u0441\\u0435\\u0445 \\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0439\",children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...');try{setLoading(true);const[machinesData,flightsData]=await Promise.all([machineAPI.getMachines(),flightAPI.getFlights()]);console.log('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ - –º–∞—à–∏–Ω—ã:',machinesData.length,'—Ä–µ–π—Å—ã:',flightsData.length);setMachines(machinesData);setFlights(flightsData);}catch(err){console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:',err);}finally{setLoading(false);}},disabled:loading,className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\",children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSaveDialog(true),disabled:loading||pendingChanges.length===0,className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:pendingChanges.length>0?'#e0f2fe':'#f1f5f9',color:pendingChanges.length>0?'#0c4a6e':'#64748b',borderColor:pendingChanges.length>0?'#7dd3fc':'#cbd5e1',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F (\".concat(pendingChanges.length,\")\"),children:[\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \",pendingChanges.length>0&&\"(\".concat(pendingChanges.length,\")\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 border-l pl-3 ml-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:createChainFromSelected,disabled:selectedFlights.size<2,className:\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:selectedFlights.size>=2?'#e0f2fe':'#f8fafc',color:selectedFlights.size>=2?'#0369a1':'#94a3b8',borderColor:selectedFlights.size>=2?'#7dd3fc':'#e2e8f0',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0441\\u043A\\u043E\\u0431\\u043A\\u0443 \\u0438\\u0437 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432 (Shift+\\u043A\\u043B\\u0438\\u043A \\u0434\\u043B\\u044F \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430)\",children:[\"\\u0421\\u043A\\u043E\\u0431\\u043A\\u0430 (\",selectedFlights.size,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:breakSelectedChain,disabled:!selectedChain,className:\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:selectedChain?'#fecaca':'#f8fafc',color:selectedChain?'#dc2626':'#94a3b8',borderColor:selectedChain?'#fca5a5':'#e2e8f0',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0420\\u0430\\u0437\\u0431\\u0438\\u0442\\u044C \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u0443\\u044E \\u0441\\u043A\\u043E\\u0431\\u043A\\u0443 (\\u0441\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043A\\u043B\\u0438\\u043A\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E \\u0441\\u043A\\u043E\\u0431\\u043A\\u0435)\",children:\"\\u0420\\u0430\\u0437\\u0431\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearSelection,disabled:selectedFlights.size===0,className:\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:selectedFlights.size>0?'#fef3c7':'#f8fafc',color:selectedFlights.size>0?'#92400e':'#94a3b8',borderColor:selectedFlights.size>0?'#fde68a':'#e2e8f0',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u044B\\u0431\\u043E\\u0440\",children:\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"})]}),isMultiSelectMode&&/*#__PURE__*/_jsx(\"div\",{className:\"px-2 py-1 text-xs font-medium rounded border transition-all duration-200\",style:{backgroundColor:'#fef3c7',color:'#92400e',borderColor:'#fde68a',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0420\\u0435\\u0436\\u0438\\u043C \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432 \\u0430\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D. \\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0441\\u043A\\u0438\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u043E. \\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 '\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C' \\u0434\\u043B\\u044F \\u0432\\u044B\\u0445\\u043E\\u0434\\u0430.\",children:\"\\uD83C\\uDFAF \\u0420\\u0435\\u0436\\u0438\\u043C \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200 flex items-center gap-2 cursor-pointer\",style:{backgroundColor:autoAfterImport?'#e0f2fe':'#f8fafc',color:autoAfterImport?'#0c4a6e':'#64748b',borderColor:autoAfterImport?'#7dd3fc':'#e2e8f0',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},title:\"\\u0410\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438 \\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0440\\u0435\\u0439\\u0441\\u044B \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0438\\u043C\\u043F\\u043E\\u0440\\u0442\\u0430\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoAfterImport,onChange:e=>setAutoAfterImport(e.target.checked),className:\"hidden\"}),/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 rounded border flex items-center justify-center text-xs\",style:{backgroundColor:autoAfterImport?'#0c4a6e':'transparent',borderColor:autoAfterImport?'#0c4a6e':'#94a3b8',color:'white'},children:autoAfterImport&&'‚úì'}),\"\\u0410\\u0432\\u0442\\u043E\\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"select\",{value:horizontalScale,onChange:e=>setHorizontalScale(Number(e.target.value)),className:\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)',cursor:'pointer'},title:\"\\u041C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431 \\u0434\\u0438\\u0430\\u0433\\u0440\\u0430\\u043C\\u043C\\u044B\",children:[/*#__PURE__*/_jsx(\"option\",{value:0.5,children:\"\\u041C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431 50%\"}),/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u041C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431 100%\"}),/*#__PURE__*/_jsx(\"option\",{value:1.5,children:\"\\u041C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431 150%\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u041C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431 200%\"})]})})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 p-2 rounded text-xs\",style:{background:'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)',color:'#dc2626',border:'1px solid #fca5a5',boxShadow:'0 1px 2px rgba(220, 38, 38, 0.1)'},children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex flex-col min-h-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col min-h-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none border-b flex z-30\",style:{background:'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',borderBottomColor:'#cbd5e1',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',height:\"\".concat(laneH,\"px\"),boxSizing:'border-box'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none flex\",style:{width:\"\".concat(TOTAL_DRIVERS_WIDTH,\"px\"),borderRight:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-none px-2 py-1 flex items-center justify-center\",style:{width:\"\".concat(DRIVER_INFO_WIDTH,\"px\"),height:'100%',borderRight:'1px solid #cbd5e1',background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',boxSizing:'border-box'},children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold\",style:{color:'#475569'},children:\"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-none px-2 py-1 flex items-center justify-center\",style:{width:\"\".concat(MACHINE_SELECT_WIDTH,\"px\"),height:'100%',borderRight:'1px solid #cbd5e1',background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',boxSizing:'border-box'},children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold\",style:{color:'#475569'},children:\"\\u0410\\u0432\\u0442\\u043E\\u043B\\u0438\\u0444\\u0442\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-none px-2 py-1 flex items-center justify-center\",style:{width:\"\".concat(SHIFT_TIME_WIDTH,\"px\"),height:'100%',borderRight:'1px solid #cbd5e1',background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',boxSizing:'border-box'},children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold\",style:{color:'#475569'},children:\"\\u0412\\u0440\\u0435\\u043C\\u044F \\u0441\\u043C\\u0435\\u043D\\u044B\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-none px-2 py-1 flex items-center justify-center\",style:{width:\"\".concat(WORK_DURATION_WIDTH,\"px\"),height:'100%',background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',boxSizing:'border-box'},children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold\",style:{color:'#475569'},children:\"\\u0394t\"})})]}),/*#__PURE__*/_jsx(\"div\",{ref:footRef,className:\"flex-1 overflow-x-auto overflow-y-hidden\",style:{height:\"\".concat(laneH,\"px\"),boxSizing:'border-box'},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:totalWidth,height:'100%',background:'linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)',boxShadow:'inset 0 1px 3px rgba(0,0,0,0.1)'},children:[gridLines.map(minutes=>/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:(minutes-DAY_START)*pxPerMin,top:0,bottom:0,width:'1px',backgroundColor:minutes%60===0?'#64748b':'#cbd5e1',display:'flex',alignItems:'flex-end',justifyContent:'center',paddingBottom:'2px',boxShadow:minutes%60===0?'0 0 2px rgba(100,116,139,0.3)':'none'},children:minutes%60===0&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'8px',color:'#475569',backgroundColor:'rgba(255,255,255,0.9)',padding:'1px 3px',borderRadius:'2px',border:'1px solid #cbd5e1',fontWeight:'500',textShadow:'0 1px 1px rgba(255,255,255,0.8)',boxShadow:'0 1px 2px rgba(0,0,0,0.1)'},children:toHHMM(minutes)})},minutes)),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:nowLeft,top:0,bottom:0,width:'2px',background:'linear-gradient(180deg, #ef4444 0%, #dc2626 100%)',zIndex:10,boxShadow:'0 0 8px rgba(239,68,68,0.6), 0 0 4px rgba(239,68,68,0.8)'}})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",style:{maxHeight:'calc(100vh - 200px)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",style:{minHeight:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{ref:driversRef,className:\"flex-none bg-white sticky left-0 z-10\",style:{width:\"\".concat(TOTAL_DRIVERS_WIDTH,\"px\"),borderRight:'1px solid #e5e7eb',boxShadow:'2px 0 8px rgba(0,0,0,0.1)'},children:drivers.map((driver,index)=>{var _machines$find2;const hasNoMachine=!driver.machineId||driver.machineId==='';const hasOvertime=checkDriverOvertime(driver.id);const machine=driver.machineId&&driver.machineId!==''?machines.find(m=>m.id===driver.machineId):null;const layerCount=machine?getLayerCount(machine.id):1;const flightHeight=laneH-12;const layerSpacing=flightHeight+6;const dynamicLaneH=layerCount===1?laneH:Math.max(laneH,layerCount*layerSpacing+12);return/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 flex\",style:{height:dynamicLaneH,boxSizing:'border-box'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none px-2 py-1 \".concat(hasOvertime?'bg-red-100':'bg-white',\" flex flex-col justify-center\"),style:{width:\"\".concat(DRIVER_INFO_WIDTH,\"px\"),borderRight:'1px solid #e5e7eb',boxSizing:'border-box'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',fontWeight:'600',color:'#111827',lineHeight:'1.2',marginBottom:'2px'},children:formatDriverName(driver.name)}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'9px',color:'#6b7280',lineHeight:'1.2'},children:[toHHMM(driver.shiftStart),\" - \",toHHMM(driver.shiftEnd)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none px-2 py-1 \".concat(hasNoMachine?'bg-red-100':'bg-white',\" flex flex-col justify-center\"),style:{width:\"\".concat(MACHINE_SELECT_WIDTH,\"px\"),borderRight:'1px solid #e5e7eb',boxSizing:'border-box'},children:[/*#__PURE__*/_jsxs(\"select\",{value:driver.machineId||'',onChange:e=>handleDriverMachineChange(driver.id,e.target.value),className:\"w-full text-xs border border-gray-300 rounded px-2 py-1 bg-white mb-1\",style:{fontSize:'10px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043C\\u0430\\u0448\\u0438\\u043D\\u0443\"}),machines.map(machine=>/*#__PURE__*/_jsx(\"option\",{value:machine.id,children:machine.name},machine.id))]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'9px',color:'#6b7280',lineHeight:'1.2'},children:driver.machineId&&driver.machineId!==''?((_machines$find2=machines.find(m=>m.id===driver.machineId))===null||_machines$find2===void 0?void 0:_machines$find2.name)||'–ú–∞—à–∏–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞':'–ú–∞—à–∏–Ω–∞ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'}),hasNoMachine&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-600\",style:{fontSize:'8px',lineHeight:'1.2'},children:\"\\u26A0\\uFE0F \\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0448\\u0438\\u043D\\u0443\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none bg-white flex flex-col justify-center items-center gap-1\",style:{width:\"\".concat(SHIFT_TIME_WIDTH,\"px\"),borderRight:'1px solid #e5e7eb',boxSizing:'border-box',padding:'1px 2px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:toHHMM(getDriverShiftTime(driver.id).shiftStart),onChange:e=>{const[hours,minutes]=e.target.value.split(':').map(Number);updateDriverShiftTime(driver.id,'shiftStart',hours*60+minutes);},className:\"text-xs border border-gray-300 rounded bg-white\",style:{fontSize:'9px',height:'16px',width:'65px',padding:'1px 3px',textAlign:'center'}}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:toHHMM(getDriverShiftTime(driver.id).shiftEnd),onChange:e=>{const[hours,minutes]=e.target.value.split(':').map(Number);updateDriverShiftTime(driver.id,'shiftEnd',hours*60+minutes);},className:\"text-xs border border-gray-300 rounded bg-white\",style:{fontSize:'9px',height:'16px',width:'65px',padding:'1px 3px',textAlign:'center'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-none px-1 py-1 bg-gray-50 flex items-center justify-center\",style:{width:\"\".concat(WORK_DURATION_WIDTH,\"px\"),boxSizing:'border-box'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',fontWeight:'600',color:'#374151',lineHeight:'1.2'},children:(()=>{const shiftTime=getDriverShiftTime(driver.id);return calculateShiftDuration(shiftTime.shiftStart,shiftTime.shiftEnd);})()}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'8px',color:'#6b7280',lineHeight:'1.2'},children:\"\\u0447\\u0430\\u0441\\u043E\\u0432\"})]})})]},driver.id);})}),/*#__PURE__*/_jsx(\"div\",{ref:mainRef,className:\"flex-1 bg-gray-50 overflow-x-auto\",style:{boxShadow:'inset 2px 0 8px rgba(0,0,0,0.05)'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:totalWidth,minHeight:'100%'},children:drivers.map((driver,index)=>{var _chainsByMachine$mach;const machine=driver.machineId&&driver.machineId!==''?machines.find(m=>m.id===driver.machineId):null;const machineFlights=machine?flightsByMachine[machine.id]||[]:[];const layerCount=machine?getLayerCount(machine.id):1;const flightHeight=laneH-12;const layerSpacing=flightHeight+6;const dynamicLaneH=layerCount===1?laneH:Math.max(laneH,layerCount*layerSpacing+12);return/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",style:{height:dynamicLaneH,boxSizing:'border-box'},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:totalWidth,height:'100%',boxSizing:'border-box'},children:[gridLines.map(minutes=>/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:(minutes-DAY_START)*pxPerMin,top:0,bottom:0,width:'1px',backgroundColor:minutes%60===0?'#9ca3af':'#e5e7eb',opacity:0.7,zIndex:1}},minutes)),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:(getDriverShiftTime(driver.id).shiftStart-DAY_START)*pxPerMin,top:0,width:(getDriverShiftTime(driver.id).shiftEnd-getDriverShiftTime(driver.id).shiftStart)*pxPerMin,height:'100%',backgroundColor:'#87ceeb',// –ù–µ–±–µ—Å–Ω–æ-–≥–æ–ª—É–±–æ–π\nopacity:0.15,// –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\nborderRadius:'2px',zIndex:1}}),timeGapInfo&&timeGapInfo.machineId===(machine===null||machine===void 0?void 0:machine.id)&&activeFlight&&/*#__PURE__*/_jsxs(_Fragment,{children:[timeGapInfo.beforeGap&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:(timeGapInfo.beforeGap.insertTime-DAY_START)*pxPerMin,top:'50%',transform:'translateY(-50%)',width:Math.max(30,timeGapInfo.beforeGap.gap*pxPerMin),height:10,backgroundColor:timeGapInfo.beforeGap.gap<25?'rgba(239, 68, 68, 0.15)'// –ö—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ < 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n:'rgba(107, 114, 128, 0.15)',// –°–µ—Ä—ã–π –µ—Å–ª–∏ >= 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\nborder:timeGapInfo.beforeGap.gap<25?'1px dashed #ef4444':'1px dashed #6b7280',borderRadius:'3px',zIndex:15,display:'flex',alignItems:'center',justifyContent:'center',fontSize:'8px',color:timeGapInfo.beforeGap.gap<25?'#dc2626':'#374151',fontWeight:'500'},children:[Math.floor(timeGapInfo.beforeGap.gap),\"\\u043C\\u0438\\u043D\"]}),timeGapInfo.afterGap&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:(timeGapInfo.afterGap.insertTime-DAY_START)*pxPerMin,top:'30%',transform:'translateY(-50%)',width:Math.max(30,timeGapInfo.afterGap.gap*pxPerMin),height:10,backgroundColor:timeGapInfo.afterGap.gap<25?'rgba(239, 68, 68, 0.15)'// –ö—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ < 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n:'rgba(107, 114, 128, 0.15)',// –°–µ—Ä—ã–π –µ—Å–ª–∏ >= 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\nborder:timeGapInfo.afterGap.gap<25?'1px dashed #ef4444':'1px dashed #6b7280',borderRadius:'3px',zIndex:15,display:'flex',alignItems:'center',justifyContent:'center',fontSize:'8px',color:timeGapInfo.afterGap.gap<25?'#dc2626':'#374151',fontWeight:'500'},children:[Math.floor(timeGapInfo.afterGap.gap),\"\\u043C\\u0438\\u043D\"]})]}),machine&&/*#__PURE__*/_jsxs(DroppableMachineSlot,{machine:machine,laneH:dynamicLaneH,totalWidth:totalWidth,children:[(_chainsByMachine$mach=chainsByMachine[machine.id])===null||_chainsByMachine$mach===void 0?void 0:_chainsByMachine$mach.map((chain,idx)=>{const xPos=(chain.start-DAY_START)*pxPerMin;const xPosEnd=(chain.end-DAY_START)*pxPerMin;const width=Math.max(4,xPosEnd-xPos);const currentChainWindows=chainWindows[chain.chainId]||{};// –ü–æ–ª—É—á–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã —Ü–µ–ø–æ—á–∫–∏ –ø–æ —Å–ª–æ—è–º\nconst layerBounds=getChainLayerBounds(chain.chainId,machine.id);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute border-2 border-purple-500\",style:{left:xPos,width:width,top:layerBounds.top,// –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–ª–æ—è\nheight:layerBounds.height,// –í—ã—Å–æ—Ç–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏\nborderRadius:'4px',backgroundColor:selectedChain===chain.chainId?'rgba(239, 68, 68, 0.2)'// –ö—Ä–∞—Å–Ω–æ–≤–∞—Ç—ã–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π\n:'rgba(147, 51, 234, 0.1)',// –û–±—ã—á–Ω—ã–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π\nborder:selectedChain===chain.chainId?'2px solid #EF4444'// –ö—Ä–∞—Å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π\n:'2px solid #9333EA',// –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞\nzIndex:1,cursor:'pointer'},onClick:()=>handleChainClick(chain.chainId),title:\"\\u041A\\u043B\\u0438\\u043A\\u043D\\u0438\\u0442\\u0435 \\u0434\\u043B\\u044F \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0441\\u043A\\u043E\\u0431\\u043A\\u0438, \\u0437\\u0430\\u0442\\u0435\\u043C \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 '\\u0420\\u0430\\u0437\\u0431\\u0438\\u0442\\u044C \\u0441\\u043A\\u043E\\u0431\\u043A\\u0443' \\u0432 \\u043F\\u0430\\u043D\\u0435\\u043B\\u0438 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:xPos-2,// –ù–µ–º–Ω–æ–≥–æ –ª–µ–≤–µ–µ –Ω–∞—á–∞–ª–∞ –ø–æ–ª–æ—Å—ã\ntop:layerBounds.top+layerBounds.height/2,// –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ —Ü–µ–ø–æ—á–∫–∏\ntransform:'translateY(-50%)',height:15,// –ú–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç—ã –ø–æ–ª–æ—Å—ã\nminWidth:'40px',backgroundColor:'rgba(5, 150, 105, 0.7)',// –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π\ncolor:'white',borderRadius:'3px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'9px',fontWeight:'600',zIndex:5,border:'1px solid rgba(4, 120, 87, 0.8)'},children:/*#__PURE__*/_jsxs(\"select\",{value:currentChainWindows.loadingWindow||'',onChange:e=>{const newValue=e.target.value?Number(e.target.value):undefined;setChainWindows(prev=>_objectSpread(_objectSpread({},prev),{},{[chain.chainId]:_objectSpread(_objectSpread({},prev[chain.chainId]),{},{loadingWindow:newValue})}));},style:{backgroundColor:'transparent',border:'none',color:'white',fontSize:'9px',fontWeight:'600',outline:'none',cursor:'pointer',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:'#000'},children:\"\\u2014\"}),Array.from({length:19},(_,i)=>i+1).map(num=>/*#__PURE__*/_jsx(\"option\",{value:num,style:{color:'#000'},children:num},num))]})}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:xPos+width-38,// –ù–µ–º–Ω–æ–≥–æ –ª–µ–≤–µ–µ –∫–æ–Ω—Ü–∞ –ø–æ–ª–æ—Å—ã (—à–∏—Ä–∏–Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ ~40px)\ntop:layerBounds.top+layerBounds.height/2,// –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ —Ü–µ–ø–æ—á–∫–∏\ntransform:'translateY(-50%)',height:15,// –ú–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç—ã –ø–æ–ª–æ—Å—ã\nminWidth:'40px',backgroundColor:'rgba(220, 38, 38, 0.7)',color:'white',borderRadius:'3px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'9px',fontWeight:'600',zIndex:5,border:'1px solid #B91C1C'},children:/*#__PURE__*/_jsxs(\"select\",{value:currentChainWindows.unloadingWindow||'',onChange:e=>{const newValue=e.target.value?Number(e.target.value):undefined;setChainWindows(prev=>_objectSpread(_objectSpread({},prev),{},{[chain.chainId]:_objectSpread(_objectSpread({},prev[chain.chainId]),{},{unloadingWindow:newValue})}));},style:{backgroundColor:'transparent',border:'none',color:'white',fontSize:'9px',fontWeight:'600',outline:'none',cursor:'pointer',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:'#000'},children:\"\\u2014\"}),[20,21,22,23].map(num=>/*#__PURE__*/_jsx(\"option\",{value:num,style:{color:'#000'},children:num},num))]})}),width>100&&(()=>{// –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–æ–π —Ü–µ–ø–æ—á–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\nconst defaultAutolift=chainAutolifts[chain.chainId]||getAutoliftFromMachine(chain.machineId);// –ï—Å–ª–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç –Ω–µ –±—ã–ª –Ω–∞–∑–Ω–∞—á–µ–Ω —Ä–∞–Ω–µ–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º\nif(!chainAutolifts[chain.chainId]&&defaultAutolift){autoAssignAutolift(chain.chainId,chain.machineId);}return/*#__PURE__*/_jsxs(\"select\",{value:defaultAutolift,onChange:e=>{const value=e.target.value;setChainAutolifts(prev=>_objectSpread(_objectSpread({},prev),{},{[chain.chainId]:value}));},style:{position:'absolute',left:xPos+width/2,top:'50%',transform:'translate(-50%, -50%)',fontSize:'9px',color:selectedChain===chain.chainId?'#DC2626':'#8B5CF6',fontWeight:'600',backgroundColor:'rgba(255, 255, 255, 0.95)',border:\"1px solid \".concat(selectedChain===chain.chainId?'#DC2626':'#8B5CF6'),borderRadius:'3px',padding:'2px 4px',minWidth:'60px',maxWidth:'80px',textAlign:'center',zIndex:3,outline:'none',cursor:'pointer'},onClick:e=>e.stopPropagation()// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–±–æ—Ä —Ü–µ–ø–æ—á–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø–æ–ª–µ\n,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:'#000'},children:\"\\u2014\"}),(autolifts.length>0?autolifts:['133','135','136','139','140','141','149','150','151']).map(autolift=>/*#__PURE__*/_jsx(\"option\",{value:autolift,style:{color:'#000'},children:autolift},autolift))]});})()]},\"chain-\".concat(machine.id,\"-\").concat(chain.chainId,\"-\").concat(idx));}),machineFlights.map((flight,index)=>{const left=(flight.loadStart-DAY_START)*pxPerMin;const width=Math.max(12,(flight.loadEnd-flight.loadStart)*pxPerMin);const isPending=pendingChanges.some(c=>c.flightId===flight.id);const flightLayer=machine?getFlightLayer(flight.id,machine.id):0;const totalLayers=machine?getLayerCount(machine.id):1;// –†–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ\nconst flightHeight=laneH-12;// –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Ä–µ–π—Å–∞\nlet layerTop=0;if(totalLayers===1){// –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ–π, —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –≤ —Å—Ç—Ä–æ–∫–µ\nlayerTop=0;// –ë—É–¥–µ—Ç —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ CSS (top: 50%, transform: translateY(-50%))\n}else{// –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤, —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ\nconst layerSpacing=flightHeight+4;// –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏\nconst totalHeight=totalLayers*layerSpacing;const centerY=dynamicLaneH/2;const startY=centerY-totalHeight/2;layerTop=startY+flightLayer*layerSpacing;}// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Å–∫–æ–±–∫–µ (—Ü–µ–ø–æ—á–∫–µ)\nconst flightsInSameChain=machineFlights.filter(f=>f.chainId===flight.chainId);const indexInChain=flightsInSameChain.findIndex(f=>f.id===flight.id);const chainLength=flightsInSameChain.length;let bracketPosition='single';let showBracket=false;if(chainLength>1&&flight.chainId&&flight.chainId.trim()!==''){showBracket=true;if(indexInChain===0){bracketPosition='start';}else if(indexInChain===chainLength-1){bracketPosition='end';}else{bracketPosition='middle';}}// –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–∞ –ø–æ–¥ —Ä–µ–π—Å–∞–º–∏ - –æ–Ω–∏ –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫—Ä–∞—è—Ö —Å–∫–æ–±–æ–∫\nlet loadingWindow;let unloadingWindow;return/*#__PURE__*/_jsx(DraggableFlight,{flight:flight,left:left,width:width,laneH:laneH-6// –£–º–µ–Ω—å—à–∏–ª–∏ –æ—Ç—Å—Ç—É–ø: –±—ã–ª–æ laneH-12, —Å—Ç–∞–ª–æ laneH-6 –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã\n,fontPx:fontPx,isAssigned:true,isPending:isPending,status:getFlightStatus(flight),showBracket:showBracket,bracketPosition:bracketPosition,loadingWindow:loadingWindow,unloadingWindow:unloadingWindow,onStatusChange:status=>updateFlightStatus(flight.flightNo,status),onClick:handleFlightClick,isSelected:selectedFlights.has(flight.id),layerTop:layerTop,useLayerPositioning:totalLayers>1// –í–∫–ª—é—á–∞–µ–º —Å–ª–æ–µ–≤–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ä–µ–π—Å–æ–≤\n},flight.id);})]}),!machine&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(239, 68, 68, 0.1)',border:'2px dashed #ef4444',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',color:'#ef4444',fontSize:'9px',// –£–º–µ–Ω—å—à–∏–ª–∏ —Å 12px –¥–æ 9px\nfontWeight:'bold',zIndex:2},children:\"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u044C\\u0442\\u0435 \\u043C\\u0430\\u0448\\u0438\\u043D\\u0443 \\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044E\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:nowLeft,top:0,height:'100%',width:'2px',backgroundColor:'#ef4444',zIndex:10}})]})},driver.id);})})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-0 left-0 right-0 border-t-2 border-blue-300 bg-blue-50 z-40\",style:{height:basementHeight,background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',boxShadow:'0 -4px 8px rgba(0,0,0,0.1)',borderColor:'#cbd5e1'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-blue-400 cursor-ns-resize hover:bg-blue-500 transition-colors flex items-center justify-center\",style:{height:'6px'},onMouseDown:e=>{setIsResizing(true);const startY=e.clientY;const startHeight=basementHeight;const handleMouseMove=e=>{const deltaY=startY-e.clientY;const newHeight=Math.max(80,Math.min(400,startHeight+deltaY));setBasementHeight(newHeight);};const handleMouseUp=()=>{setIsResizing(false);document.removeEventListener('mousemove',handleMouseMove);document.removeEventListener('mouseup',handleMouseUp);};document.addEventListener('mousemove',handleMouseMove);document.addEventListener('mouseup',handleMouseUp);},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-1 bg-blue-600 rounded-full opacity-60\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",style:{height:basementHeight-6},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-none p-3 flex items-center\",style:{width:\"\".concat(TOTAL_DRIVERS_WIDTH,\"px\"),borderRight:'2px solid #cbd5e1',boxShadow:'2px 0 8px rgba(0,0,0,0.1)',background:'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-semibold\",style:{color:'#475569'},children:[\"\\u041D\\u0435\\u043D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0440\\u0435\\u0439\\u0441\\u044B (\",arrangeUnassignedFlights.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{ref:basementRef,className:\"flex-1 overflow-auto\",style:{boxShadow:'inset 2px 0 8px rgba(0,0,0,0.05)',background:'#f9fafb'},children:/*#__PURE__*/_jsxs(DroppableUnassigned,{totalWidth:totalWidth,height:arrangeUnassignedFlights.length>0?Math.max(basementHeight-6,(Math.max(...arrangeUnassignedFlights.map(f=>f.laneIndex))+1)*laneH):basementHeight-6,children:[gridLines.map(minutes=>{// –í—ã—á–∏—Å–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤\nconst maxLaneIndex=arrangeUnassignedFlights.length>0?Math.max(...arrangeUnassignedFlights.map(f=>f.laneIndex)):0;const actualHeight=Math.max(basementHeight-6,(maxLaneIndex+1)*laneH);return/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:(minutes-DAY_START)*pxPerMin,top:0,height:actualHeight,width:'1px',backgroundColor:minutes%60===0?'#9ca3af':'#e5e7eb',opacity:0.7,zIndex:1}},\"basement-grid-\".concat(minutes));}),(()=>{// –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä—è–¥–æ–≤ —Å —Ä–µ–π—Å–∞–º–∏\nconst maxLaneIndex=arrangeUnassignedFlights.length>0?Math.max(...arrangeUnassignedFlights.map(f=>f.laneIndex)):0;const minLines=Math.floor((basementHeight-6)/laneH)+1;const actualLines=Math.max(minLines,maxLaneIndex+2);// +2 –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ —Å–Ω–∏–∑—É\nreturn Array.from({length:actualLines},(_,i)=>/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:0,right:0,top:i*laneH,height:'1px',backgroundColor:'#e5e7eb',opacity:0.5,zIndex:1}},\"basement-horizontal-\".concat(i)));})(),arrangeUnassignedFlights.map(flight=>{const left=(flight.loadStart-DAY_START)*pxPerMin;const width=Math.max(12,(flight.loadEnd-flight.loadStart)*pxPerMin);const top=flight.laneIndex*laneH+(laneH-(laneH-16))/2;// –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ä–µ–π—Å –≤ —Å—Ç—Ä–æ–∫–µ –∫–∞–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ\nconst isPending=pendingChanges.some(c=>c.flightId===flight.id);return/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:left,top:top,width:width,height:laneH-12// –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ\n},children:/*#__PURE__*/_jsx(DraggableFlight,{flight:flight,left:0,width:width,laneH:laneH-6// –¢–∞–∫–∞—è –∂–µ –≤—ã—Å–æ—Ç–∞ –∫–∞–∫ —É –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ (—É–≤–µ–ª–∏—á–∏–ª–∏ —Å laneH-12)\n,fontPx:fontPx,isAssigned:false,isPending:isPending,status:getFlightStatus(flight),onStatusChange:status=>updateFlightStatus(flight.flightNo,status),onClick:handleFlightClick,isSelected:selectedFlights.has(flight.id)})},flight.id);}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:nowLeft,top:0,bottom:0,width:'2px',backgroundColor:'#ef4444',zIndex:10}})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-none bg-white border-t border-gray-200 px-4 py-2\",style:{marginBottom:\"\".concat(basementHeight,\"px\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"\\u0412\\u044B\\u0441\\u043E\\u0442\\u0430 \\u043F\\u043E\\u0434\\u0432\\u0430\\u043B\\u0430: \",basementHeight,\"px\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBasementHeight(120),className:\"text-xs px-2 py-1 bg-gray-200 rounded hover:bg-gray-300\",children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})]})}),showSaveDialog&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999]\",style:{position:'fixed',top:0,left:0,right:0,bottom:0,zIndex:9999},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg shadow-2xl max-w-lg w-full mx-4 max-h-80 flex flex-col border-2 border-blue-300\",style:{backgroundColor:'#f0f8ff'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b-2 border-blue-300 bg-gradient-to-r from-blue-100 to-blue-200 rounded-t-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-blue-900\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0440\\u0430\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043A\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-700 mt-1\",children:\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0438\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0438 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto px-4 py-3\",style:{backgroundColor:'#f0f8ff'},children:pendingChanges.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-center py-6 text-sm\",children:\"\\u041D\\u0435\\u0442 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0439 \\u0434\\u043B\\u044F \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u044F\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:pendingChanges.map(change=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-white rounded-md p-2 border border-blue-200 shadow-sm\",style:{backgroundColor:'#ffffff',borderColor:'#b3d9ff'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-blue-900\",children:[change.flightNo,\": \",change.fromMachine,\" \\u2192 \",change.toMachine]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveChange(change.id),className:\"ml-2 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 border border-red-300 transition-colors\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]},change.id))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-t-2 border-blue-300 flex justify-end gap-2 bg-gradient-to-r from-blue-100 to-blue-200 rounded-b-lg\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelChanges,className:\"px-3 py-1.5 text-sm font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:'#e0f2fe',color:'#0c4a6e',borderColor:'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyChanges,disabled:loading||pendingChanges.length===0,className:\"px-3 py-1.5 text-sm font-semibold rounded shadow-sm border transition-all duration-200\",style:{backgroundColor:loading||pendingChanges.length===0?'#f1f5f9':'#e0f2fe',color:loading||pendingChanges.length===0?'#64748b':'#0c4a6e',borderColor:loading||pendingChanges.length===0?'#cbd5e1':'#7dd3fc',boxShadow:'0 2px 4px rgba(0,0,0,0.1)',cursor:loading||pendingChanges.length===0?'not-allowed':'pointer'},children:loading?'–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...':'–ü—Ä–∏–º–µ–Ω–∏—Ç—å'})]})]})}),/*#__PURE__*/_jsx(DragOverlay,{modifiers:[restrictToVerticalAxis],children:activeFlight&&/*#__PURE__*/_jsx(DraggableFlight,{flight:activeFlight,left:0,width:Math.max(12,(activeFlight.loadEnd-activeFlight.loadStart)*pxPerMin),laneH:laneH,fontPx:fontPx,isAssigned:!!activeFlight.vehicleId,isPending:false,status:getFlightStatus(activeFlight),onClick:handleFlightClick,isSelected:selectedFlights.has(activeFlight.id)})})]})});};export default PlannerPage;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","DndContext","DragOverlay","rectIntersection","flightAPI","machineAPI","DAY_START","DAY_END","GRID_STEP","toHHMM","DraggableFlight","DroppableMachineSlot","DroppableUnassigned","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","restrictToVerticalAxis","args","transform","draggingNodeRect","activatorEvent","x","y","scaleX","scaleY","PlannerPage","machines","setMachines","flights","setFlights","autolifts","setAutolifts","loading","setLoading","error","setError","activeFlight","setActiveFlight","pendingChanges","setPendingChanges","showSaveDialog","setShowSaveDialog","drivers","setDrivers","customShiftTimes","setCustomShiftTimes","basementHeight","setBasementHeight","isResizing","setIsResizing","horizontalScale","setHorizontalScale","chainWindows","setChainWindows","chainAutolifts","setChainAutolifts","flightStatuses","setFlightStatuses","selectedFlights","setSelectedFlights","Set","isMultiSelectMode","setIsMultiSelectMode","selectedChain","setSelectedChain","isDragging","setIsDragging","hoverMachineId","setHoverMachineId","timeGapInfo","setTimeGapInfo","getFlightStatus","flight","flightNo","updateFlightStatus","status","prev","_objectSpread","loadData","console","log","machinesData","flightsData","autoliftsResponse","Promise","all","getMachines","getFlights","fetch","length","autoliftsText","text","substring","autoliftsData","split","slice","map","line","trim","filter","e","warn","fallbackAutolifts","driversData","machine","id","concat","name","driver","machineId","shiftStart","shiftEnd","defaultTimes","forEach","savedChains","localStorage","getItem","chainData","JSON","parse","Object","keys","updatedFlights","chainId","savedAutolifts","autoliftData","err","setItem","stringify","getAutoliftFromMachine","find","m","autoliftNumber","replace","autoAssignAutolift","getDriverShiftTime","driverId","d","calculateShiftDuration","duration","hours","Math","floor","minutes","updateDriverShiftTime","field","value","formatDriverName","fullName","parts","surname","firstName","charAt","toUpperCase","middleName","DRIVER_INFO_WIDTH","MACHINE_SELECT_WIDTH","SHIFT_TIME_WIDTH","WORK_DURATION_WIDTH","TOTAL_DRIVERS_WIDTH","basePxPerMin","pxPerMin","laneH","fontPx","max","min","mainRef","footRef","basementRef","driversRef","timer","setTimeout","timeHeader","current","mainArea","basement","isScrolling","onMainScroll","scrollLeft","requestAnimationFrame","addEventListener","passive","removeEventListener","clearTimeout","driversArea","isVerticalScrolling","syncScrollTop","sourceScrollTop","source","scrollTop","onMainVerticalScroll","onDriversVerticalScroll","nowLeft","setNowLeft","tick","Date","getHours","getMinutes","left","setInterval","clearInterval","handleKeyDown","event","key","clearSelection","document","body","style","overflow","fileRef","autoAfterImport","setAutoAfterImport","onPick","_fileRef$current","click","onFile","_e$target$files","file","target","files","size","importedFlights","importCSV","handleAutoAssign","Error","message","autoAssign","handleResetAssign","resetAssignments","totalWidth","gridLines","push","flightsByMachine","byMachine","f","vehicleId","values","list","sort","a","b","serviceStart","calculateFlightLayers","layersByMachine","entries","_ref","machineFlights","flightsWithLayers","layer","placed","conflictOnLayer","some","item","serviceEnd","getLayerCount","layers","getFlightLayer","flightId","getChainLayerBounds","chainLayers","minLayer","maxLayer","top","height","totalLayers","flightHeight","layerSpacing","dynamicLaneH","totalHeight","centerY","startY","chainTop","chainBottom","chainHeight","unassignedFlights","chainsByMachine","byM","_byM$mid","_byM$mid$cid","mid","cid","res","chains","arr","startsWith","start","kitchenOut","end","unloadEnd","arrangeUnassignedFlights","flightsWithPositions","lanes","laneIndex","hasConflict","existing","customCollisionDetection","droppableRects","droppableContainers","active","pointerCoordinates","unassignedContainer","container","rect","get","isWithinUnassigned","right","bottom","calculateTimeGap","insertTime","sortedFlights","draggedFlightStart","draggedFlightEnd","draggedFlightDuration","beforeFlight","afterFlight","i","result","beforeGap","gap","afterGap","handleDragStart","handleDragOver","_over$data$current","over","data","type","currentTime","gapInfo","handleDragEnd","_over$data$current2","_over$data$current3","_over$data$current4","activeId","overId","overType","existingChangeIndex","findIndex","c","existingChange","originalVehicleId","updatedChange","toMachine","newVehicleId","_machines$find","changeId","now","toString","change","fromMachine","handleRemoveChange","handleApplyChanges","assignFlight","unassignFlight","handleCancelChanges","toggleFlightSelection","newSelected","has","delete","_selectedFlightObject","selectedFlightIds","Array","from","selectedFlightObjects","includes","firstMachine","add","handleChainClick","breakSelectedChain","alert","breakChain","createChainFromSelected","allOnSameMachine","every","newChainId","handleFlightClick","shiftKey","_selectedFlightObject2","element","currentTarget","originalBorder","border","backgroundColor","preventDefault","stopPropagation","handleDriverMachineChange","prevDrivers","checkDriverOvertime","firstFlight","lastFlight","shiftTime","className","children","onDragStart","onDragOver","onDragEnd","onDragCancel","autoScroll","collisionDetection","background","cursor","display","alignItems","justifyContent","boxShadow","margin","lineHeight","color","onClick","disabled","borderColor","title","ref","accept","onChange","checked","Number","borderBottomColor","boxSizing","width","borderRight","position","paddingBottom","fontSize","padding","borderRadius","fontWeight","textShadow","zIndex","maxHeight","minHeight","index","_machines$find2","hasNoMachine","hasOvertime","layerCount","marginBottom","textAlign","_chainsByMachine$mach","opacity","chain","idx","xPos","xPosEnd","currentChainWindows","layerBounds","minWidth","loadingWindow","newValue","undefined","outline","_","num","unloadingWindow","defaultAutolift","maxWidth","autolift","loadStart","loadEnd","isPending","flightLayer","layerTop","flightsInSameChain","indexInChain","chainLength","bracketPosition","showBracket","isAssigned","onStatusChange","isSelected","useLayerPositioning","onMouseDown","clientY","startHeight","handleMouseMove","deltaY","newHeight","handleMouseUp","maxLaneIndex","actualHeight","minLines","actualLines","modifiers"],"sources":["/Users/igordvoretskii/Documents/aeromar-python/frontend/src/PlannerPage.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { \n  DndContext, \n  DragEndEvent, \n  DragOverlay, \n  DragStartEvent,\n  closestCenter,\n  pointerWithin,\n  rectIntersection \n} from '@dnd-kit/core';\nimport { Flight, Machine, Driver } from './types';\nimport { flightAPI, machineAPI } from './api';\nimport { DAY_START, DAY_END, GRID_STEP, toHHMM } from './utils';\nimport { DraggableFlight } from './components/DraggableFlight';\nimport { DroppableMachineSlot } from './components/DroppableMachineSlot';\nimport { DroppableUnassigned } from './components/DroppableUnassigned';\nimport { PlannerControls } from './components/PlannerControls';\n\n// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\ninterface FlightAssignmentChange {\n  id: string;\n  flightId: string;\n  flightNo: string;\n  fromMachine?: string;\n  toMachine?: string;\n  originalVehicleId?: string;\n  newVehicleId?: string;\n}\n\n// –ö–∞—Å—Ç–æ–º–Ω—ã–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏\nconst restrictToVerticalAxis = (args: any) => {\n  const { transform, draggingNodeRect, activatorEvent } = args;\n  \n  if (!draggingNodeRect || !activatorEvent) {\n    return transform;\n  }\n\n  return {\n    x: 0, // –ë–ª–æ–∫–∏—Ä—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ\n    y: transform.y, // –û—Å—Ç–∞–≤–ª—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ\n    scaleX: transform.scaleX,\n    scaleY: transform.scaleY,\n  };\n};\n\nconst PlannerPage: React.FC = () => {\n  const [machines, setMachines] = useState<Machine[]>([]);\n  const [flights, setFlights] = useState<Flight[]>([]);\n  const [autolifts, setAutolifts] = useState<string[]>([]); // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Drag and Drop —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n  const [activeFlight, setActiveFlight] = useState<Flight | null>(null);\n  \n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\n  const [pendingChanges, setPendingChanges] = useState<FlightAssignmentChange[]>([]);\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\n  \n  // –í–æ–¥–∏—Ç–µ–ª–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n  \n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –≤—Ä–µ–º–µ–Ω —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª–µ–π\n  const [customShiftTimes, setCustomShiftTimes] = useState<{\n    [driverId: string]: {\n      shiftStart: number;\n      shiftEnd: number;\n    }\n  }>({});\n  \n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤—ã—Å–æ—Ç—ã –ø–æ–¥–≤–∞–ª–∞\n  const [basementHeight, setBasementHeight] = useState(120); // –í—ã—Å–æ—Ç–∞ –¥–ª—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤\n  const [isResizing, setIsResizing] = useState(false);\n\n  // –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\n  const [horizontalScale, setHorizontalScale] = useState(1);\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫–æ–Ω –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ\n  const [chainWindows, setChainWindows] = useState<{\n    [chainId: string]: {\n      loadingWindow?: number;\n      unloadingWindow?: number;\n    }\n  }>({});\n  \n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏\n  const [chainAutolifts, setChainAutolifts] = useState<{\n    [chainId: string]: string;\n  }>({});\n  \n  // –°—Ç–∞—Ç—É—Å—ã —Ä–µ–π—Å–æ–≤\n  const [flightStatuses, setFlightStatuses] = useState<Record<string, 'completed' | 'in-progress' | 'planned'>>({});\n\n  // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Ä–µ–π—Å–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–æ–∫\n  const [selectedFlights, setSelectedFlights] = useState<Set<string>>(new Set());\n  const [isMultiSelectMode, setIsMultiSelectMode] = useState(false);\n  const [selectedChain, setSelectedChain] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n\n  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∑–æ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏\n  const [hoverMachineId, setHoverMachineId] = useState<string | null>(null);\n  const [timeGapInfo, setTimeGapInfo] = useState<{\n    machineId: string;\n    beforeGap?: {\n      flight?: Flight;\n      gap: number;\n      insertTime: number;\n    };\n    afterGap?: {\n      flight?: Flight;\n      gap: number;\n      insertTime: number;\n    };\n  } | null>(null);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–π—Å–∞\n  const getFlightStatus = (flight: Flight): 'completed' | 'in-progress' | 'planned' => {\n    return flightStatuses[flight.flightNo] || 'planned';\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–π—Å–∞\n  const updateFlightStatus = (flightNo: string, status: 'completed' | 'in-progress' | 'planned') => {\n    setFlightStatuses(prev => ({\n      ...prev,\n      [flightNo]: status\n    }));\n  };\n\n  // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...');\n        const [machinesData, flightsData, autoliftsResponse] = await Promise.all([\n          machineAPI.getMachines(),\n          flightAPI.getFlights(),\n          fetch('/autolifts.csv') // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\n        ]);\n        console.log('‚úÖ –ú–∞—à–∏–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', machinesData.length);\n        console.log('‚úÖ –†–µ–π—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', flightsData.length);\n        setMachines(machinesData);\n        setFlights(flightsData);\n        \n        // –ü–∞—Ä—Å–∏–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã –∏–∑ CSV\n        try {\n          const autoliftsText = await autoliftsResponse.text();\n          console.log('üìÑ –°—ã—Ä–æ–π —Ç–µ–∫—Å—Ç –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤:', autoliftsText.substring(0, 200));\n          const autoliftsData = autoliftsText\n            .split('\\n')\n            .slice(1) // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫\n            .map(line => line.trim())\n            .filter(line => line.length > 0);\n          console.log('‚úÖ –ê–≤—Ç–æ–ª–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', autoliftsData);\n          setAutolifts(autoliftsData);\n        } catch (e) {\n          console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫:', e);\n          // –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤\n          const fallbackAutolifts = ['133', '135', '136', '139', '140', '141', '149', '150', '151', '152', '153', '154', '155', '156', '157', '158', '159', '160'];\n          setAutolifts(fallbackAutolifts);\n        }\n        \n        // –°–æ–∑–¥–∞–µ–º –≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω\n        const driversData: Driver[] = machinesData.map(machine => ({\n          id: `driver-${machine.id}`,\n          name: machine.driver,\n          machineId: machine.id,\n          shiftStart: machine.shiftStart,\n          shiftEnd: machine.shiftEnd\n        }));\n        setDrivers(driversData);\n        \n        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Ä–µ–º–µ–Ω–∞ —Å–º–µ–Ω –≤–æ–¥–∏—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n        const defaultTimes: { [driverId: string]: { shiftStart: number; shiftEnd: number } } = {};\n        driversData.forEach(driver => {\n          defaultTimes[driver.id] = {\n            shiftStart: driver.shiftStart,\n            shiftEnd: driver.shiftEnd\n          };\n        });\n        setCustomShiftTimes(defaultTimes);\n        \n        console.log('‚úÖ –í–æ–¥–∏—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã:', driversData.length);\n        \n        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –∏–∑ localStorage\n        const savedChains = localStorage.getItem('flight-chains');\n        if (savedChains) {\n          try {\n            const chainData = JSON.parse(savedChains);\n            console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏:', Object.keys(chainData).length);\n            \n            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ chainId –∫ —Ä–µ–π—Å–∞–º\n            const updatedFlights = flightsData.map(flight => ({\n              ...flight,\n              chainId: chainData[flight.id] || flight.chainId || ''\n            }));\n            setFlights(updatedFlights);\n          } catch (e) {\n            console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫:', e);\n          }\n        }\n        \n        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã –¥–ª—è —Ü–µ–ø–æ—á–µ–∫\n        const savedAutolifts = localStorage.getItem('chain-autolifts');\n        if (savedAutolifts) {\n          try {\n            const autoliftData = JSON.parse(savedAutolifts);\n            console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç—ã:', Object.keys(autoliftData).length);\n            setChainAutolifts(autoliftData);\n          } catch (e) {\n            console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤:', e);\n          }\n        }\n        \n      } catch (err) {\n        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', err);\n        setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\n  useEffect(() => {\n    if (flights.length > 0) {\n      const chainData: Record<string, string> = {};\n      flights.forEach(flight => {\n        if (flight.chainId) {\n          chainData[flight.id] = flight.chainId;\n        }\n      });\n      localStorage.setItem('flight-chains', JSON.stringify(chainData));\n      console.log('üíæ –¶–µ–ø–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');\n    }\n  }, [flights]);\n  \n  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\n  useEffect(() => {\n    localStorage.setItem('chain-autolifts', JSON.stringify(chainAutolifts));\n    console.log('üíæ –ê–≤—Ç–æ–ª–∏—Ñ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');\n  }, [chainAutolifts]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–∞ –∏–∑ –º–∞—à–∏–Ω—ã\n  const getAutoliftFromMachine = (machineId: string): string => {\n    const machine = machines.find(m => m.id === machineId);\n    if (!machine) return '';\n    \n    // –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–º–µ—Ä –∏–∑ ID –º–∞—à–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"M133\" -> \"133\")\n    const autoliftNumber = machine.id.replace('M', '');\n    return autoliftNumber;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–≤—Ç–æ–ª–∏—Ñ—Ç–∞ —Ü–µ–ø–æ—á–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\n  const autoAssignAutolift = (chainId: string, machineId: string) => {\n    // –ï—Å–ª–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω, –Ω–µ –º–µ–Ω—è–µ–º\n    if (chainAutolifts[chainId]) return;\n    \n    const autoliftNumber = getAutoliftFromMachine(machineId);\n    if (autoliftNumber) {\n      setChainAutolifts(prev => ({\n        ...prev,\n        [chainId]: autoliftNumber\n      }));\n      console.log(`üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω –∞–≤—Ç–æ–ª–∏—Ñ—Ç ${autoliftNumber} –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ ${chainId}`);\n    }\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)\n  const getDriverShiftTime = (driverId: string) => {\n    return customShiftTimes[driverId] || drivers.find(d => d.id === driverId) || { shiftStart: 6 * 60, shiftEnd: 22 * 60 };\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–º–µ–Ω—ã\n  const calculateShiftDuration = (shiftStart: number, shiftEnd: number) => {\n    const duration = shiftEnd - shiftStart;\n    const hours = Math.floor(duration / 60);\n    const minutes = duration % 60;\n    return `${hours}—á ${minutes > 0 ? minutes + '–º' : ''}`.trim();\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—è\n  const updateDriverShiftTime = (driverId: string, field: 'shiftStart' | 'shiftEnd', value: number) => {\n    setCustomShiftTimes(prev => ({\n      ...prev,\n      [driverId]: {\n        ...prev[driverId],\n        [field]: value\n      }\n    }));\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –∏–º–µ–Ω–∏ –¥–æ —Ñ–æ—Ä–º–∞—Ç–∞ \"–§–∞–º–∏–ª–∏—è –ò.–û.\"\n  const formatDriverName = (fullName: string): string => {\n    if (!fullName || fullName.trim() === '') return '–ë–µ–∑ –∏–º–µ–Ω–∏';\n    \n    const parts = fullName.trim().split(/\\s+/);\n    if (parts.length === 1) return parts[0]; // –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ\n    \n    if (parts.length === 2) {\n      // –ï—Å–ª–∏ –¥–≤–∞ —Å–ª–æ–≤–∞: \"–§–∞–º–∏–ª–∏—è –ò–º—è\" -> \"–§–∞–º–∏–ª–∏—è –ò.\"\n      const surname = parts[0];\n      const firstName = parts[1];\n      return `${surname} ${firstName.charAt(0).toUpperCase()}.`;\n    }\n    \n    if (parts.length >= 3) {\n      // –ï—Å–ª–∏ —Ç—Ä–∏ –∏–ª–∏ –±–æ–ª—å—à–µ —Å–ª–æ–≤: \"–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ\" -> \"–§–∞–º–∏–ª–∏—è –ò.–û.\"\n      const surname = parts[0];\n      const firstName = parts[1];\n      const middleName = parts[2];\n      return `${surname} ${firstName.charAt(0).toUpperCase()}.${middleName.charAt(0).toUpperCase()}.`;\n    }\n    \n    return fullName; // Fallback\n  };\n\n  // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫\n  const DRIVER_INFO_WIDTH = 140;  // –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–æ–¥–∏—Ç–µ–ª–µ (—É–º–µ–Ω—å—à–µ–Ω–∞ —Å 160 –¥–æ 140)\n  const MACHINE_SELECT_WIDTH = 75; // –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –º–∞—à–∏–Ω—ã (—É–≤–µ–ª–∏—á–µ–Ω–∞ —Å 65 –¥–æ 75)\n  const SHIFT_TIME_WIDTH = 95; // –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º —Å–º–µ–Ω—ã (—É–≤–µ–ª–∏—á–µ–Ω–∞ —Å 80 –¥–æ 95)\n  const WORK_DURATION_WIDTH = 59; // –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ —Å —Ä–∞—Å—á–µ—Ç–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã (—É–º–µ–Ω—å—à–µ–Ω–∞ —Å 79 –¥–æ 59)\n  const TOTAL_DRIVERS_WIDTH = 369; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—â–∞—è —à–∏—Ä–∏–Ω–∞ (140 + 75 + 95 + 59 = 369)\n\n  // –ú–∞—Å—à—Ç–∞–± –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n  const basePxPerMin = 4;  // –£–≤–µ–ª–∏—á–∏–ª–∏ —Å 2 –¥–æ 4 –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è\n  const pxPerMin = basePxPerMin * horizontalScale;  // X - –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ\n  const laneH = 55;      // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫ —Å 45 –¥–æ 55 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏\n  const fontPx = Math.max(9, Math.min(11, laneH/5)); // –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞\n\n  // –°–∫—Ä–æ–ª–ª –∏ ¬´—Å–µ–π—á–∞—Å¬ª\n  const mainRef = useRef<HTMLDivElement>(null);\n  const footRef = useRef<HTMLDivElement>(null);\n  const basementRef = useRef<HTMLDivElement>(null); // –î–ª—è –ø–æ–¥–≤–∞–ª–∞ —Å –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ —Ä–µ–π—Å–∞–º–∏\n  const driversRef = useRef<HTMLDivElement>(null); // –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π\n  \n  useEffect(() => {\n    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–æ–π, –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –∏ basement\n    const timer = setTimeout(() => {\n      const timeHeader = footRef.current;\n      const mainArea = mainRef.current;\n      const basement = basementRef.current;\n      \n      console.log('üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞...');\n      \n      if (!timeHeader || !mainArea || !basement) {\n        console.log('‚ùå –ù–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞–π–¥–µ–Ω—ã:', {\n          timeHeader: !!timeHeader, \n          mainArea: !!mainArea,\n          basement: !!basement\n        });\n        return;\n      }\n\n      let isScrolling = false;\n\n      // –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ - –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∫—Ä–æ–ª–ª–∞\n      const onMainScroll = () => {\n        if (isScrolling) return;\n        isScrolling = true;\n        \n        const scrollLeft = mainArea.scrollLeft;\n        \n        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–¥–≤–∞–ª\n        if (timeHeader.scrollLeft !== scrollLeft) {\n          timeHeader.scrollLeft = scrollLeft;\n        }\n        if (basement.scrollLeft !== scrollLeft) {\n          basement.scrollLeft = scrollLeft;\n        }\n        \n        requestAnimationFrame(() => {\n          isScrolling = false;\n        });\n      };\n\n      // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª—É—à–∞—Ç–µ–ª—å - –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É\n      mainArea.addEventListener('scroll', onMainScroll, { passive: true });\n      \n      console.log('‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');\n\n      return () => {\n        mainArea.removeEventListener('scroll', onMainScroll);\n      };\n    }, 500);\n\n    return () => clearTimeout(timer);\n  }, []);\n  \n  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –∏ –±–ª–æ–∫–æ–º –≤–æ–¥–∏—Ç–µ–ª–µ–π\n  useEffect(() => {\n    const mainArea = mainRef.current;\n    const driversArea = driversRef.current;\n    \n    if (!mainArea || !driversArea) return;\n    \n    let isVerticalScrolling = false;\n    \n    const syncScrollTop = (sourceScrollTop: number, source: string) => {\n      if (isVerticalScrolling) return;\n      isVerticalScrolling = true;\n      \n      if (source !== 'main') mainArea.scrollTop = sourceScrollTop;\n      if (source !== 'drivers') driversArea.scrollTop = sourceScrollTop;\n      \n      requestAnimationFrame(() => {\n        isVerticalScrolling = false;\n      });\n    };\n    \n    const onMainVerticalScroll = () => {\n      if (!isVerticalScrolling) {\n        syncScrollTop(mainArea.scrollTop, 'main');\n      }\n    };\n    \n    const onDriversVerticalScroll = () => {\n      if (!isVerticalScrolling) {\n        syncScrollTop(driversArea.scrollTop, 'drivers');\n      }\n    };\n    \n    mainArea.addEventListener('scroll', onMainVerticalScroll);\n    driversArea.addEventListener('scroll', onDriversVerticalScroll);\n    \n    return () => {\n      mainArea.removeEventListener('scroll', onMainVerticalScroll);\n      driversArea.removeEventListener('scroll', onDriversVerticalScroll);\n    };\n  }, []);\n\n  const [nowLeft, setNowLeft] = useState(0);\n  useEffect(() => {\n    const tick = () => {\n      const d = new Date();\n      const m = d.getHours() * 60 + d.getMinutes();\n      const left = (m - DAY_START) * pxPerMin;\n      setNowLeft(left);\n    };\n    \n    tick();\n    const timer = setInterval(tick, 10_000);\n    return () => clearInterval(timer);\n  }, [pxPerMin]);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–º multi-select\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && isMultiSelectMode) {\n        clearSelection();\n        console.log('üîÑ –í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ multi-select –ø–æ Escape');\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isMultiSelectMode]);\n\n  // –û—á–∏—Å—Ç–∫–∞ overflow –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\n  useEffect(() => {\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, []);\n\n  // –ò–º–ø–æ—Ä—Ç CSV\n  const fileRef = useRef<HTMLInputElement>(null);\n  const [autoAfterImport, setAutoAfterImport] = useState(true);\n  \n  const onPick = () => fileRef.current?.click();\n  \n  const onFile = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    try {\n      setLoading(true);\n      setError(null); // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏\n      console.log('üìÅ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª:', file.name, '—Ä–∞–∑–º–µ—Ä:', file.size);\n      \n      const importedFlights = await flightAPI.importCSV(file);\n      console.log('‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –ø–æ–ª—É—á–µ–Ω–æ —Ä–µ–π—Å–æ–≤:', importedFlights.length);\n      \n      // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n      setFlights([...importedFlights]); // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞\n      \n      if (autoAfterImport) {\n        console.log('ü§ñ –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ...');\n        await handleAutoAssign();\n      }\n      \n      // –û—á–∏—â–∞–µ–º input –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞\n      if (fileRef.current) {\n        fileRef.current.value = '';\n      }\n    } catch (err) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ CSV:', err);\n      setError(`–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ CSV: ${err instanceof Error ? err.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ\n  const handleAutoAssign = async () => {\n    try {\n      setLoading(true);\n      await flightAPI.autoAssign();\n      const updatedFlights = await flightAPI.getFlights();\n      setFlights(updatedFlights);\n      setError(null);\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // –°–±—Ä–æ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\n  const handleResetAssign = async () => {\n    try {\n      setLoading(true);\n      await flightAPI.resetAssignments();\n      const updatedFlights = await flightAPI.getFlights();\n      setFlights(updatedFlights);\n      setError(null);\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // –í—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n  const totalWidth = (DAY_END - DAY_START) * pxPerMin;\n  const gridLines: number[] = [];\n  for (let m = DAY_START; m <= DAY_END; m += GRID_STEP) {\n    gridLines.push(m);\n  }\n\n  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ä–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–∞–º\n  const flightsByMachine = useMemo(() => {\n    const byMachine: Record<string, Flight[]> = {};\n    machines.forEach(m => byMachine[m.id] = []);\n    \n    flights.forEach(f => {\n      if (f.vehicleId && f.vehicleId.trim() !== '') {\n        byMachine[f.vehicleId] = byMachine[f.vehicleId] || [];\n        byMachine[f.vehicleId].push(f);\n      }\n    });\n    \n    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏\n    Object.values(byMachine).forEach(list => \n      list.sort((a, b) => a.serviceStart - b.serviceStart)\n    );\n    \n    console.log('üîÑ –†–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–∞–º:', byMachine);\n    console.log('üîÑ –í—Å–µ–≥–æ —Ä–µ–π—Å–æ–≤:', flights.length, '–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö:', flights.filter(f => f.vehicleId && f.vehicleId.trim() !== '').length);\n    \n    return byMachine;\n  }, [flights, machines]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–ª–æ–µ–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ä–µ–π—Å–æ–≤\n  const calculateFlightLayers = useMemo(() => {\n    const layersByMachine: Record<string, Array<{ flight: Flight; layer: number }>> = {};\n    \n    Object.entries(flightsByMachine).forEach(([machineId, machineFlights]) => {\n      const flightsWithLayers: Array<{ flight: Flight; layer: number }> = [];\n      \n      machineFlights.forEach(flight => {\n        // –ù–∞—Ö–æ–¥–∏–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–ª–æ–π –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\n        let layer = 0;\n        let placed = false;\n        \n        while (!placed) {\n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Ä–µ–π—Å–∞–º–∏ –Ω–∞ —ç—Ç–æ–º —Å–ª–æ–µ\n          const conflictOnLayer = flightsWithLayers.some(item => \n            item.layer === layer && \n            !(flight.serviceEnd <= item.flight.serviceStart || flight.serviceStart >= item.flight.serviceEnd)\n          );\n          \n          if (!conflictOnLayer) {\n            flightsWithLayers.push({ flight, layer });\n            placed = true;\n          } else {\n            layer++;\n          }\n        }\n      });\n      \n      layersByMachine[machineId] = flightsWithLayers;\n    });\n    \n    return layersByMachine;\n  }, [flightsByMachine]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–æ–µ–≤ –¥–ª—è –º–∞—à–∏–Ω—ã\n  const getLayerCount = (machineId: string): number => {\n    const layers = calculateFlightLayers[machineId] || [];\n    return Math.max(1, ...layers.map(item => item.layer + 1));\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—è —Ä–µ–π—Å–∞\n  const getFlightLayer = (flightId: string, machineId: string): number => {\n    const layers = calculateFlightLayers[machineId] || [];\n    const item = layers.find(item => item.flight.id === flightId);\n    return item?.layer || 0;\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü —Ü–µ–ø–æ—á–∫–∏ –ø–æ —Å–ª–æ—è–º (–≤–µ—Ä—Ö–Ω–∏–π –∏ –Ω–∏–∂–Ω–∏–π —Å–ª–æ–π)\n  const getChainLayerBounds = (chainId: string, machineId: string): { minLayer: number; maxLayer: number; top: number; height: number } => {\n    const layers = calculateFlightLayers[machineId] || [];\n    const chainLayers = layers.filter(item => item.flight.chainId === chainId).map(item => item.layer);\n    \n    if (chainLayers.length === 0) {\n      return { minLayer: 0, maxLayer: 0, top: 0, height: 25 };\n    }\n    \n    const minLayer = Math.min(...chainLayers);\n    const maxLayer = Math.max(...chainLayers);\n    const totalLayers = getLayerCount(machineId);\n    const flightHeight = laneH - 12; // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Ä–µ–π—Å–∞\n    const layerSpacing = flightHeight + 6; // –£–≤–µ–ª–∏—á–∏–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏\n    \n    if (totalLayers === 1) {\n      // –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ–π, —Å–∫–æ–±–∫–∞ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ\n      return {\n        minLayer: 0,\n        maxLayer: 0,\n        top: (laneH - 25) / 2, // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–∫–æ–±–∫—É —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã\n        height: 25 // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Å–∫–æ–±–∫–∏\n      };\n    } else {\n      // –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤, —Å–∫–æ–±–∫–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏ —Ü–µ–ø–æ—á–∫–∏\n      const dynamicLaneH = Math.max(laneH, totalLayers * layerSpacing + 12);\n      const totalHeight = totalLayers * layerSpacing;\n      const centerY = dynamicLaneH / 2;\n      const startY = centerY - totalHeight / 2;\n      \n      const chainTop = startY + minLayer * layerSpacing;\n      const chainBottom = startY + maxLayer * layerSpacing + flightHeight;\n      const chainHeight = Math.max(25, chainBottom - chainTop); // –£–≤–µ–ª–∏—á–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É\n      \n      return {\n        minLayer,\n        maxLayer,\n        top: chainTop,\n        height: chainHeight\n      };\n    }\n  };\n\n  // –ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ä–µ–π—Å—ã\n  const unassignedFlights = flights.filter(f => !f.vehicleId || f.vehicleId.trim() === '');\n  \n  // –¶–µ–ø–æ—á–∫–∏/—Å–∫–æ–±–∫–∏ –ø–æ chainId, –æ—Ç kitchenOut –ø–µ—Ä–≤–æ–≥–æ –¥–æ unloadEnd –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ\n  const chainsByMachine = useMemo(() => {\n    // —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Å—ã –ø–æ –º–∞—à–∏–Ω–µ –∏ chainId (–ø—É—Å—Ç—ã–º —Ä–µ–π—Å–∞–º –¥–∞—ë–º —Å–≤–æ–π \"solo-...\" chainId)\n    const byM: Record<string, Record<string, Flight[]>> = {};\n    for (const m of machines) byM[m.id] = {};\n    for (const f of flights) if (f.vehicleId) {\n      const mid = f.vehicleId;\n      const cid = f.chainId && f.chainId.length ? f.chainId : `solo-${f.id}`;\n      (byM[mid][cid] ??= []).push(f);\n    }\n    const res: Record<string, Array<{chainId: string; machineId: string; start: number; end: number}>> = {};\n    for (const mid of Object.keys(byM)) {\n      const chains = byM[mid];\n      const arr: Array<{chainId: string; machineId: string; start: number; end: number}> = [];\n      for (const cid of Object.keys(chains)) {\n        const list = chains[cid].slice().sort((a,b)=>a.serviceStart-b.serviceStart);\n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ–±–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫ (–Ω–µ solo) –∏ –µ—Å–ª–∏ –≤ —Ü–µ–ø–æ—á–∫–µ –±–æ–ª—å—à–µ 1 —Ä–µ–π—Å–∞\n        if (cid.startsWith('solo-') || list.length < 2) continue; \n        const start = Math.min(...list.map(x=>x.kitchenOut));\n        const end   = Math.max(...list.map(x=>x.unloadEnd));\n        arr.push({ chainId: cid, machineId: mid, start: Math.max(DAY_START, start), end: Math.min(DAY_END, end) });\n      }\n      // —Å–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞\n      arr.sort((a,b)=>a.start-b.start);\n      res[mid] = arr;\n    }\n    return res;\n  }, [flights, machines]);\n  \n  // –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ –±–µ–∑ –Ω–∞–ª–æ–∂–µ–Ω–∏–π\n  const arrangeUnassignedFlights = useMemo(() => {\n    const flightsWithPositions = [...unassignedFlights].sort((a, b) => a.serviceStart - b.serviceStart);\n    const lanes: { [key: number]: { start: number; end: number }[] } = {};\n    \n    return flightsWithPositions.map(flight => {\n      let laneIndex = 0;\n      \n      // –ù–∞–π–¥–µ–º —Å–≤–æ–±–æ–¥–Ω—É—é –ø–æ–ª–æ—Å—É\n      while (lanes[laneIndex]) {\n        const hasConflict = lanes[laneIndex].some(existing => \n          !(flight.serviceEnd <= existing.start || flight.serviceStart >= existing.end)\n        );\n        if (!hasConflict) break;\n        laneIndex++;\n      }\n      \n      // –î–æ–±–∞–≤–∏–º —Ä–µ–π—Å –≤ —ç—Ç—É –ø–æ–ª–æ—Å—É\n      if (!lanes[laneIndex]) lanes[laneIndex] = [];\n      lanes[laneIndex].push({ start: flight.serviceStart, end: flight.serviceEnd });\n      \n      return { ...flight, laneIndex };\n    });\n  }, [unassignedFlights]);\n\n  // Custom collision detection –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö\n  const customCollisionDetection = (args: any) => {\n    const { droppableRects, droppableContainers, active, pointerCoordinates } = args;\n    \n    if (!pointerCoordinates) {\n      return rectIntersection(args);\n    }\n    \n    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö\n    const unassignedContainer = droppableContainers.find((container: any) => container.id === 'unassigned');\n    if (unassignedContainer) {\n      const rect = droppableRects.get('unassigned');\n      if (rect) {\n        const isWithinUnassigned = \n          pointerCoordinates.x >= rect.left &&\n          pointerCoordinates.x <= rect.right &&\n          pointerCoordinates.y >= rect.top &&\n          pointerCoordinates.y <= rect.bottom;\n        \n        if (isWithinUnassigned) {\n          return [{ id: 'unassigned' }];\n        }\n      }\n    }\n    \n    // –ï—Å–ª–∏ –Ω–µ –≤ –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º\n    return rectIntersection(args);\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∑–æ—Ä–æ–≤ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Ä–µ–π—Å–∞\n  const calculateTimeGap = (machineId: string, insertTime: number) => {\n    const machineFlights = flightsByMachine[machineId] || [];\n    const sortedFlights = [...machineFlights].sort((a, b) => a.serviceStart - b.serviceStart);\n    \n    if (!activeFlight) return { machineId };\n    \n    const draggedFlightStart = activeFlight.serviceStart;\n    const draggedFlightEnd = activeFlight.serviceEnd;\n    const draggedFlightDuration = draggedFlightEnd - draggedFlightStart;\n    \n    let beforeFlight: Flight | undefined;\n    let afterFlight: Flight | undefined;\n    \n    // –ù–∞—Ö–æ–¥–∏–º —Ä–µ–π—Å—ã –¥–æ –∏ –ø–æ—Å–ª–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Å—Ç–∞–≤–∫–∏\n    for (let i = 0; i < sortedFlights.length; i++) {\n      const flight = sortedFlights[i];\n      if (flight.serviceStart <= insertTime) {\n        beforeFlight = flight;\n      }\n      if (flight.serviceStart > insertTime && !afterFlight) {\n        afterFlight = flight;\n        break;\n      }\n    }\n    \n    const result: {\n      machineId: string;\n      beforeGap?: { flight?: Flight; gap: number; insertTime: number };\n      afterGap?: { flight?: Flight; gap: number; insertTime: number };\n    } = { machineId };\n    \n    // –í—ã—á–∏—Å–ª—è–µ–º –∑–∞–∑–æ—Ä —Å–ª–µ–≤–∞ –æ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ä–µ–π—Å–∞ (–æ—Ç –Ω–∞—á–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)\n    if (beforeFlight) {\n      const beforeGap = draggedFlightStart - beforeFlight.serviceEnd;\n      if (beforeGap >= 0) {\n        result.beforeGap = {\n          flight: beforeFlight,\n          gap: beforeGap,\n          insertTime: beforeFlight.serviceEnd\n        };\n      }\n    } else {\n      // –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Ä–µ–π—Å–æ–º\n      const beforeGap = draggedFlightStart - DAY_START;\n      if (beforeGap >= 0) {\n        result.beforeGap = {\n          gap: beforeGap,\n          insertTime: DAY_START\n        };\n      }\n    }\n    \n    // –í—ã—á–∏—Å–ª—è–µ–º –∑–∞–∑–æ—Ä —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ä–µ–π—Å–∞ (–æ—Ç –∫–æ–Ω—Ü–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)\n    if (afterFlight) {\n      const afterGap = afterFlight.serviceStart - draggedFlightEnd;\n      if (afterGap >= 0) {\n        result.afterGap = {\n          flight: afterFlight,\n          gap: afterGap,\n          insertTime: draggedFlightEnd\n        };\n      }\n    } else {\n      // –ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Å–∞\n      const afterGap = DAY_END - draggedFlightEnd;\n      if (afterGap >= 0) {\n        result.afterGap = {\n          gap: afterGap,\n          insertTime: draggedFlightEnd\n        };\n      }\n    }\n    \n    return result;\n  };\n  \n  const handleDragStart = (event: DragStartEvent) => {\n    const { active } = event;\n    const flight = flights.find(f => f.id === active.id);\n    if (flight) {\n      setActiveFlight(flight);\n      setIsDragging(true);\n      // –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è\n      document.body.style.overflow = 'hidden';\n    }\n  };\n\n  const handleDragOver = (event: any) => {\n    const { active, over } = event;\n    \n    if (!active || !over || !activeFlight) return;\n    \n    // –ï—Å–ª–∏ –Ω–∞–≤–æ–¥–∏–º—Å—è –Ω–∞ –º–∞—à–∏–Ω—É, –≤—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–∑–æ—Ä\n    if (over.data.current?.type === 'machine') {\n      const machineId = over.id as string;\n      \n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ä–µ–π—Å–∞ –∫–∞–∫ –ø–æ–∑–∏—Ü–∏—é –≤—Å—Ç–∞–≤–∫–∏\n      const currentTime = activeFlight.serviceStart;\n      \n      const gapInfo = calculateTimeGap(machineId, currentTime);\n      setTimeGapInfo(gapInfo);\n      setHoverMachineId(machineId);\n    } else {\n      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∑–æ—Ä–µ\n      setTimeGapInfo(null);\n      setHoverMachineId(null);\n    }\n  };\n\n  const handleDragEnd = async (event: DragEndEvent) => {\n    const { active, over } = event;\n    setActiveFlight(null);\n    setIsDragging(false);\n    setTimeGapInfo(null); // –û—á–∏—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∑–æ—Ä–µ\n    setHoverMachineId(null);\n    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n    document.body.style.overflow = '';\n    \n    console.log('üéØ DragEnd:', { \n      activeId: active.id, \n      overId: over?.id, \n      overType: over?.data.current?.type\n    });\n    \n    if (!over) {\n      return;\n    }\n    \n    const flightId = active.id as string;\n    const flight = flights.find(f => f.id === flightId);\n    if (!flight) return;\n    \n    // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º –Ω–∞ –º–∞—à–∏–Ω—É\n    if (over.data.current?.type === 'machine') {\n      const machineId = over.id as string;\n      const machine = machines.find(m => m.id === machineId);\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–µ –Ω–∞ —Ç—É –∂–µ –º–∞—à–∏–Ω—É)\n      if (flight.vehicleId === machineId) {\n        return; // –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–æ\n      }\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\n      const existingChangeIndex = pendingChanges.findIndex(c => c.flightId === flight.id);\n      \n      if (existingChangeIndex >= 0) {\n        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        const existingChange = pendingChanges[existingChangeIndex];\n        \n        // –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é –º–∞—à–∏–Ω—É, —É–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        if (existingChange.originalVehicleId === machineId) {\n          setPendingChanges(prev => prev.filter(c => c.flightId !== flight.id));\n          setFlights(prev => prev.map(f => \n            f.id === flightId ? { ...f, vehicleId: machineId } : f\n          ));\n          return;\n        }\n        \n        // –ò–Ω–∞—á–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        const updatedChange: FlightAssignmentChange = {\n          ...existingChange,\n          toMachine: machine?.name || machineId,\n          newVehicleId: machineId\n        };\n        \n        setPendingChanges(prev => prev.map(c => \n          c.id === existingChange.id ? updatedChange : c\n        ));\n      } else {\n        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        const changeId = Date.now().toString();\n        const change: FlightAssignmentChange = {\n          id: changeId,\n          flightId: flight.id,\n          flightNo: flight.flightNo,\n          fromMachine: flight.vehicleId ? machines.find(m => m.id === flight.vehicleId)?.name : '–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',\n          toMachine: machine?.name || machineId,\n          originalVehicleId: flight.vehicleId,\n          newVehicleId: machineId\n        };\n        \n        setPendingChanges(prev => [...prev, change]);\n      }\n      \n      // –õ–æ–∫–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å\n      setFlights(prev => prev.map(f => \n        f.id === flightId ? { ...f, vehicleId: machineId } : f\n      ));\n    }\n    \n    // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º –≤ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ\n    if (over.data.current?.type === 'unassigned') {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–µ –±—ã–ª –ª–∏ —É–∂–µ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º)\n      if (!flight.vehicleId) {\n        return; // –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–æ\n      }\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–π—Å–∞\n      const existingChangeIndex = pendingChanges.findIndex(c => c.flightId === flight.id);\n      \n      if (existingChangeIndex >= 0) {\n        const existingChange = pendingChanges[existingChangeIndex];\n        \n        // –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é, —É–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        if (!existingChange.originalVehicleId) {\n          setPendingChanges(prev => prev.filter(c => c.flightId !== flight.id));\n          setFlights(prev => prev.map(f => \n            f.id === flightId ? { ...f, vehicleId: '' } : f\n          ));\n          return;\n        }\n        \n        // –ò–Ω–∞—á–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ\n        const updatedChange: FlightAssignmentChange = {\n          ...existingChange,\n          toMachine: '–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',\n          newVehicleId: ''\n        };\n        \n        setPendingChanges(prev => prev.map(c => \n          c.id === existingChange.id ? updatedChange : c\n        ));\n      } else {\n        const changeId = Date.now().toString();\n        const machine = machines.find(m => m.id === flight.vehicleId);\n        const change: FlightAssignmentChange = {\n          id: changeId,\n          flightId: flight.id,\n          flightNo: flight.flightNo,\n          fromMachine: machine?.name || flight.vehicleId,\n          toMachine: '–ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ',\n          originalVehicleId: flight.vehicleId,\n          newVehicleId: ''\n        };\n        \n        setPendingChanges(prev => [...prev, change]);\n      }\n      \n      // –õ–æ–∫–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å\n      setFlights(prev => prev.map(f => \n        f.id === flightId ? { ...f, vehicleId: '' } : f\n      ));\n    }\n  };\n\n  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\n  const handleRemoveChange = (changeId: string) => {\n    const change = pendingChanges.find(c => c.id === changeId);\n    if (!change) return;\n    \n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–π—Å –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é\n    setFlights(prev => prev.map(f => \n      f.id === change.flightId \n        ? { ...f, vehicleId: change.originalVehicleId || '' }\n        : f\n    ));\n    \n    // –£–¥–∞–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞\n    setPendingChanges(prev => prev.filter(c => c.id !== changeId));\n  };\n  \n  const handleApplyChanges = async () => {\n    try {\n      setLoading(true);\n      \n      // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n      for (const change of pendingChanges) {\n        if (change.newVehicleId) {\n          await flightAPI.assignFlight(change.flightId, change.newVehicleId);\n        } else {\n          await flightAPI.unassignFlight(change.flightId);\n        }\n      }\n      \n      // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞\n      const updatedFlights = await flightAPI.getFlights();\n      setFlights(updatedFlights);\n      \n      // –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π\n      setPendingChanges([]);\n      setShowSaveDialog(false);\n      \n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleCancelChanges = () => {\n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ —Ä–µ–π—Å—ã –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é\n    let updatedFlights = [...flights];\n    \n    pendingChanges.forEach(change => {\n      updatedFlights = updatedFlights.map(f => \n        f.id === change.flightId \n          ? { ...f, vehicleId: change.originalVehicleId || '' }\n          : f\n      );\n    });\n    \n    setFlights(updatedFlights);\n    setPendingChanges([]);\n    setShowSaveDialog(false);\n  };\n    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\n  \n  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –∏ —Å–∫–æ–±–∫–∞–º–∏\n  const toggleFlightSelection = (flightId: string) => {\n    const flight = flights.find(f => f.id === flightId);\n    if (!flight) return;\n\n    setSelectedFlights(prev => {\n      const newSelected = new Set(prev);\n      \n      if (newSelected.has(flightId)) {\n        // –£–±–∏—Ä–∞–µ–º —Ä–µ–π—Å –∏–∑ –≤—ã–±–æ—Ä–∞\n        newSelected.delete(flightId);\n      } else {\n        // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å –≤ –≤—ã–±–æ—Ä, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ\n        if (newSelected.size > 0) {\n          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–π—Å—ã –Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ\n          const selectedFlightIds = Array.from(newSelected);\n          const selectedFlightObjects = flights.filter(f => selectedFlightIds.includes(f.id));\n          const firstMachine = selectedFlightObjects[0]?.vehicleId;\n          \n          if (flight.vehicleId !== firstMachine) {\n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å\n            console.log('–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å —Ä–µ–π—Å—ã —Å —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω');\n            return prev; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –Ω–∞–±–æ—Ä –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π\n          }\n        }\n        \n        // –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã - –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–π—Å\n        newSelected.add(flightId);\n      }\n      return newSelected;\n    });\n  };\n\n  const clearSelection = () => {\n    setSelectedFlights(new Set());\n    setIsMultiSelectMode(false);\n    setSelectedChain(null);\n  };\n\n  const handleChainClick = (chainId: string) => {\n    setSelectedChain(selectedChain === chainId ? null : chainId);\n  };\n\n  const breakSelectedChain = () => {\n    if (!selectedChain) {\n      alert('–í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–æ–±–∫—É –¥–ª—è —Ä–∞–∑–±–∏—Ç–∏—è, –∫–ª–∏–∫–Ω—É–≤ –ø–æ –Ω–µ–π');\n      return;\n    }\n    \n    breakChain(selectedChain);\n    setSelectedChain(null);\n  };\n\n  const createChainFromSelected = () => {\n    if (selectedFlights.size < 2) {\n      alert('–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–Ω–∏–º—É–º 2 —Ä–µ–π—Å–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–∫–∏');\n      return;\n    }\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–π—Å—ã –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ\n    const selectedFlightIds = Array.from(selectedFlights);\n    const selectedFlightObjects = flights.filter(f => selectedFlightIds.includes(f.id));\n    \n    if (selectedFlightObjects.length === 0) return;\n    \n    const firstMachine = selectedFlightObjects[0].vehicleId;\n    const allOnSameMachine = selectedFlightObjects.every(f => f.vehicleId === firstMachine);\n    \n    if (!allOnSameMachine) {\n      alert('–í—Å–µ —Ä–µ–π—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–±–∫–∏');\n      return;\n    }\n\n    if (!firstMachine) {\n      alert('–ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —Å–∫–æ–±–∫—É –¥–ª—è –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤');\n      return;\n    }\n\n    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π chainId\n    const newChainId = `chain-${Date.now()}`;\n    \n    // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Å—ã\n    setFlights(prev => prev.map(f => \n      selectedFlightIds.includes(f.id) \n        ? { ...f, chainId: newChainId }\n        : f\n    ));\n\n    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\n    autoAssignAutolift(newChainId, firstMachine);\n\n    // –û—á–∏—â–∞–µ–º –≤—ã–±–æ—Ä\n    clearSelection();\n  };\n\n  const breakChain = (chainId: string) => {\n    if (!chainId || chainId.startsWith('solo-')) return;\n    \n    // –£–±–∏—Ä–∞–µ–º chainId —É –≤—Å–µ—Ö —Ä–µ–π—Å–æ–≤ –≤ —ç—Ç–æ–π —Å–∫–æ–±–∫–µ\n    setFlights(prev => prev.map(f => \n      f.chainId === chainId \n        ? { ...f, chainId: '' }\n        : f\n    ));\n  };\n\n  const handleFlightClick = (event: React.MouseEvent, flightId: string) => {\n    if (event.shiftKey) {\n      setIsMultiSelectMode(true);\n      \n      const flight = flights.find(f => f.id === flightId);\n      if (!flight) return;\n      \n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Ä–µ–π—Å–∞–º–∏\n      if (selectedFlights.size > 0) {\n        const selectedFlightIds = Array.from(selectedFlights);\n        const selectedFlightObjects = flights.filter(f => selectedFlightIds.includes(f.id));\n        const firstMachine = selectedFlightObjects[0]?.vehicleId;\n        \n        if (flight.vehicleId !== firstMachine) {\n          // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å - –ø–æ–¥—Å–≤–µ—Ç–∏–º –Ω–µ—É–¥–∞—á–Ω—É—é –ø–æ–ø—ã—Ç–∫—É\n          console.log('‚ùå –ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å —Ä–µ–π—Å—ã —Å —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω');\n          \n          // –í—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏–º —Ä–µ–π—Å –∫—Ä–∞—Å–Ω—ã–º\n          const element = event.currentTarget as HTMLElement;\n          const originalBorder = element.style.border;\n          element.style.border = '3px solid #DC2626';\n          element.style.backgroundColor = '#FEE2E2';\n          \n          setTimeout(() => {\n            element.style.border = originalBorder;\n            element.style.backgroundColor = '';\n          }, 500);\n          \n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      }\n      \n      toggleFlightSelection(flightId);\n      event.preventDefault();\n      event.stopPropagation();\n    } else if (!isMultiSelectMode) {\n      // –û–±—ã—á–Ω—ã–π –∫–ª–∏–∫ –±–µ–∑ shift - –æ—á–∏—â–∞–µ–º –≤—ã–±–æ—Ä\n      clearSelection();\n    }\n  };\n  \n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω—ã –≤–æ–¥–∏—Ç–µ–ª—é\n  const handleDriverMachineChange = (driverId: string, machineId: string) => {\n    setDrivers(prevDrivers => \n      prevDrivers.map(d => \n        d.id === driverId \n          ? { ...d, machineId: machineId || '' }\n          : { ...d, machineId: d.machineId === machineId ? '' : d.machineId } // –£–±–∏—Ä–∞–µ–º –º–∞—à–∏–Ω—É —É –¥—Ä—É–≥–∏—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π\n      )\n    );\n  };\n  \n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã\n  const checkDriverOvertime = (driverId: string) => {\n    const driver = drivers.find(d => d.id === driverId);\n    if (!driver || !driver.machineId || driver.machineId === '') return false;\n    \n    const machineFlights = flightsByMachine[driver.machineId] || [];\n    if (machineFlights.length === 0) return false;\n    \n    const firstFlight = machineFlights[0];\n    const lastFlight = machineFlights[machineFlights.length - 1];\n    \n    const shiftTime = getDriverShiftTime(driver.id);\n    return firstFlight.serviceStart < shiftTime.shiftStart || lastFlight.serviceEnd > shiftTime.shiftEnd;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-lg\">–ó–∞–≥—Ä—É–∑–∫–∞...</div>\n      </div>\n    );\n  }\n\n  return (\n    <DndContext \n      onDragStart={handleDragStart} \n      onDragOver={handleDragOver}\n      onDragEnd={handleDragEnd}\n      onDragCancel={() => {\n        setActiveFlight(null);\n        setIsDragging(false);\n        setTimeGapInfo(null);\n        setHoverMachineId(null);\n        document.body.style.overflow = '';\n      }}\n      autoScroll={false}\n      collisionDetection={customCollisionDetection}\n    >\n      <div className=\"h-screen flex flex-col overflow-hidden\" style={{ \n        background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',\n        cursor: isResizing ? 'ns-resize' : 'default' \n      }}>\n      {/* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —Å–ø–æ–∫–æ–π–Ω–æ–º —Å—Ç–∏–ª–µ */}\n      <div className=\"shadow-md border-b flex-none z-50\" style={{ \n        background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n        height: '32px', \n        display: 'flex', \n        alignItems: 'center', \n        justifyContent: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n      }}>\n        <h1 className=\"text-xl font-semibold\" style={{ \n          margin: 0, \n          lineHeight: '1',\n          color: '#475569'\n        }}>\n          –ê—ç—Ä–æ–º–∞—Ä\n        </h1>\n      </div>\n\n      {/* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π */}\n      <div className=\"border-b px-4 py-2 flex-none z-40\" style={{\n        background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n      }}>\n        <div className=\"flex items-center justify-between\">\n          {/* –õ–µ–≤–∞—è –≥—Ä—É–ø–ø–∞ - –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}\n          <div className=\"flex items-center gap-2\">\n            {/* –ò–º–ø–æ—Ä—Ç CSV */}\n            <button\n              onClick={onPick}\n              disabled={loading}\n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n              style={{\n                backgroundColor: '#e0f2fe',\n                color: '#0c4a6e',\n                borderColor: '#7dd3fc',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title=\"–ò–º–ø–æ—Ä—Ç CSV —Ñ–∞–π–ª–∞\"\n            >\n              –ò–º–ø–æ—Ä—Ç\n            </button>\n            \n            <input\n              ref={fileRef}\n              type=\"file\"\n              accept=\".csv\"\n              onChange={onFile}\n              className=\"hidden\"\n            />\n            \n            {/* –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ */}\n            <button\n              onClick={handleAutoAssign}\n              disabled={loading || flights.length === 0}\n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n              style={{\n                backgroundColor: '#e0f2fe',\n                color: '#0c4a6e',\n                borderColor: '#7dd3fc',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title=\"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–π—Å–æ–≤\"\n            >\n              –ê–≤—Ç–æ\n            </button>\n            \n            {/* –°–±—Ä–æ—Å */}\n            <button\n              onClick={handleResetAssign}\n              disabled={loading}\n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n              style={{\n                backgroundColor: '#e0f2fe',\n                color: '#0c4a6e',\n                borderColor: '#7dd3fc',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title=\"–°–±—Ä–æ—Å –≤—Å–µ—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π\"\n            >\n              –°–±—Ä–æ—Å\n            </button>\n\n            {/* –û–±–Ω–æ–≤–∏—Ç—å */}\n            <button\n              onClick={async () => {\n                console.log('üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...');\n                try {\n                  setLoading(true);\n                  const [machinesData, flightsData] = await Promise.all([\n                    machineAPI.getMachines(),\n                    flightAPI.getFlights()\n                  ]);\n                  console.log('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ - –º–∞—à–∏–Ω—ã:', machinesData.length, '—Ä–µ–π—Å—ã:', flightsData.length);\n                  setMachines(machinesData);\n                  setFlights(flightsData);\n                } catch (err) {\n                  console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', err);\n                } finally {\n                  setLoading(false);\n                }\n              }}\n              disabled={loading}\n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n              style={{\n                backgroundColor: '#e0f2fe',\n                color: '#0c4a6e',\n                borderColor: '#7dd3fc',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title=\"–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ\"\n            >\n              –û–±–Ω–æ–≤–∏—Ç—å\n            </button>\n            \n            {/* –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫—É */}\n            <button\n              onClick={() => setShowSaveDialog(true)}\n              disabled={loading || pendingChanges.length === 0}\n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n              style={{\n                backgroundColor: pendingChanges.length > 0 ? '#e0f2fe' : '#f1f5f9',\n                color: pendingChanges.length > 0 ? '#0c4a6e' : '#64748b',\n                borderColor: pendingChanges.length > 0 ? '#7dd3fc' : '#cbd5e1',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title={`–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (${pendingChanges.length})`}\n            >\n              –°–æ—Ö—Ä–∞–Ω–∏—Ç—å {pendingChanges.length > 0 && `(${pendingChanges.length})`}\n            </button>\n            \n            {/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ–±–∫–∞–º–∏ */}\n            <div className=\"flex items-center gap-1 border-l pl-3 ml-2\">\n              <button\n                onClick={createChainFromSelected}\n                disabled={selectedFlights.size < 2}\n                className=\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: selectedFlights.size >= 2 ? '#e0f2fe' : '#f8fafc',\n                  color: selectedFlights.size >= 2 ? '#0369a1' : '#94a3b8',\n                  borderColor: selectedFlights.size >= 2 ? '#7dd3fc' : '#e2e8f0',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n                title=\"–°–æ–∑–¥–∞—Ç—å —Å–∫–æ–±–∫—É –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ (Shift+–∫–ª–∏–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞)\"\n              >\n                –°–∫–æ–±–∫–∞ ({selectedFlights.size})\n              </button>\n              \n              <button\n                onClick={breakSelectedChain}\n                disabled={!selectedChain}\n                className=\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: selectedChain ? '#fecaca' : '#f8fafc',\n                  color: selectedChain ? '#dc2626' : '#94a3b8',\n                  borderColor: selectedChain ? '#fca5a5' : '#e2e8f0',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n                title=\"–†–∞–∑–±–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–∫–æ–±–∫—É (—Å–Ω–∞—á–∞–ª–∞ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —Å–∫–æ–±–∫–µ)\"\n              >\n                –†–∞–∑–±–∏—Ç—å\n              </button>\n              \n              <button\n                onClick={clearSelection}\n                disabled={selectedFlights.size === 0}\n                className=\"px-3 py-1 text-xs font-medium rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: selectedFlights.size > 0 ? '#fef3c7' : '#f8fafc',\n                  color: selectedFlights.size > 0 ? '#92400e' : '#94a3b8',\n                  borderColor: selectedFlights.size > 0 ? '#fde68a' : '#e2e8f0',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n                title=\"–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä\"\n              >\n                –û—á–∏—Å—Ç–∏—Ç—å\n              </button>\n            </div>\n            \n            {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ multi-select */}\n            {isMultiSelectMode && (\n              <div className=\"px-2 py-1 text-xs font-medium rounded border transition-all duration-200\"\n                style={{\n                  backgroundColor: '#fef3c7',\n                  color: '#92400e',\n                  borderColor: '#fde68a',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n                title=\"–†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ —Ä–µ–π—Å–æ–≤ –∞–∫—Ç–∏–≤–µ–Ω. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ. –ù–∞–∂–º–∏—Ç–µ '–û—á–∏—Å—Ç–∏—Ç—å' –¥–ª—è –≤—ã—Ö–æ–¥–∞.\"\n              >\n                üéØ –†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞\n              </div>\n            )}\n          </div>\n\n          {/* –ü—Ä–∞–≤–∞—è –≥—Ä—É–ø–ø–∞ - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */}\n          <div className=\"flex items-center gap-2\">\n            {/* –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å—Ç–∏–ª–µ –∫–Ω–æ–ø–∫–∏ */}\n            <label \n              className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200 flex items-center gap-2 cursor-pointer\"\n              style={{\n                backgroundColor: autoAfterImport ? '#e0f2fe' : '#f8fafc',\n                color: autoAfterImport ? '#0c4a6e' : '#64748b',\n                borderColor: autoAfterImport ? '#7dd3fc' : '#e2e8f0',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              }}\n              title=\"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–µ–π—Å—ã –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞\"\n            >\n              <input\n                type=\"checkbox\"\n                checked={autoAfterImport}\n                onChange={e => setAutoAfterImport(e.target.checked)}\n                className=\"hidden\"\n              />\n              <span className=\"w-3 h-3 rounded border flex items-center justify-center text-xs\"\n                style={{\n                  backgroundColor: autoAfterImport ? '#0c4a6e' : 'transparent',\n                  borderColor: autoAfterImport ? '#0c4a6e' : '#94a3b8',\n                  color: 'white'\n                }}\n              >\n                {autoAfterImport && '‚úì'}\n              </span>\n              –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ\n            </label>\n            \n            {/* –ú–∞—Å—à—Ç–∞–± –≤ —Å—Ç–∏–ª–µ –∫–Ω–æ–ø–∫–∏ */}\n            <div className=\"flex items-center\">\n              <select\n                value={horizontalScale}\n                onChange={(e) => setHorizontalScale(Number(e.target.value))}\n                className=\"px-3 py-1 text-xs font-semibold rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: '#e0f2fe',\n                  color: '#0c4a6e',\n                  borderColor: '#7dd3fc',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n                  cursor: 'pointer'\n                }}\n                title=\"–ú–∞—Å—à—Ç–∞–± –¥–∏–∞–≥—Ä–∞–º–º—ã\"\n              >\n                <option value={0.5}>–ú–∞—Å—à—Ç–∞–± 50%</option>\n                <option value={1}>–ú–∞—Å—à—Ç–∞–± 100%</option>\n                <option value={1.5}>–ú–∞—Å—à—Ç–∞–± 150%</option>\n                <option value={2}>–ú–∞—Å—à—Ç–∞–± 200%</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        {error && (\n          <div className=\"mt-1 p-2 rounded text-xs\" style={{\n            background: 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)',\n            color: '#dc2626',\n            border: '1px solid #fca5a5',\n            boxShadow: '0 1px 2px rgba(220, 38, 38, 0.1)'\n          }}>\n            {error}\n          </div>\n        )}\n      </div>\n\n      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}\n      <div className=\"flex-1 flex flex-col min-h-0\">\n          {/* –ì–ª–∞–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ */}\n          <div className=\"flex-1 flex flex-col min-h-0\">\n            {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–æ–π */}\n            <div className=\"flex-none border-b flex z-30\" style={{\n              background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\n              borderBottomColor: '#cbd5e1',\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n              height: `${laneH}px`,\n              boxSizing: 'border-box'\n            }}>\n              {/* –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç–æ–≤ */}\n              <div className=\"flex-none flex\" style={{ \n                width: `${TOTAL_DRIVERS_WIDTH}px`,\n                borderRight: '1px solid #e5e7eb'\n              }}>\n                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ \"–†–∞–±–æ—Ç–Ω–∏–∫\" */}\n                <div \n                  className=\"flex-none px-2 py-1 flex items-center justify-center\"\n                  style={{ \n                    width: `${DRIVER_INFO_WIDTH}px`, \n                    height: '100%',\n                    borderRight: '1px solid #cbd5e1',\n                    background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',\n                    boxSizing: 'border-box'\n                  }}\n                >\n                  <div className=\"text-xs font-semibold\" style={{ \n                    color: '#475569'\n                  }}>\n                    –†–∞–±–æ—Ç–Ω–∏–∫\n                  </div>\n                </div>\n                \n                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ \"–ê–≤—Ç–æ–ª–∏—Ñ—Ç\" */}\n                <div \n                  className=\"flex-none px-2 py-1 flex items-center justify-center\"\n                  style={{ \n                    width: `${MACHINE_SELECT_WIDTH}px`, \n                    height: '100%',\n                    borderRight: '1px solid #cbd5e1',\n                    background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',\n                    boxSizing: 'border-box'\n                  }}\n                >\n                  <div className=\"text-xs font-semibold\" style={{ \n                    color: '#475569'\n                  }}>\n                    –ê–≤—Ç–æ–ª–∏—Ñ—Ç\n                  </div>\n                </div>\n                \n                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ \"–í—Ä–µ–º—è —Å–º–µ–Ω—ã\" */}\n                <div \n                  className=\"flex-none px-2 py-1 flex items-center justify-center\"\n                  style={{ \n                    width: `${SHIFT_TIME_WIDTH}px`, \n                    height: '100%',\n                    borderRight: '1px solid #cbd5e1',\n                    background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',\n                    boxSizing: 'border-box'\n                  }}\n                >\n                  <div className=\"text-xs font-semibold\" style={{ \n                    color: '#475569'\n                  }}>\n                    –í—Ä–µ–º—è —Å–º–µ–Ω—ã\n                  </div>\n                </div>\n                \n                {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ \"–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å\" */}\n                <div \n                  className=\"flex-none px-2 py-1 flex items-center justify-center\"\n                  style={{ \n                    width: `${WORK_DURATION_WIDTH}px`, \n                    height: '100%',\n                    background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1), inset -1px 0 3px rgba(0,0,0,0.05)',\n                    boxSizing: 'border-box'\n                  }}\n                >\n                  <div className=\"text-xs font-semibold\" style={{ \n                    color: '#475569'\n                  }}>\n                    Œît\n                  </div>\n                </div>\n              </div>\n              \n              {/* –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ —Å –ø—Ä—è–º—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */}\n              <div \n                ref={footRef}\n                className=\"flex-1 overflow-x-auto overflow-y-hidden\"\n                style={{ height: `${laneH}px`, boxSizing: 'border-box' }}\n              >\n                <div style={{ \n                  position: 'relative', \n                  width: totalWidth,\n                  height: '100%',\n                  background: 'linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)',\n                  boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.1)'\n                }}>\n                    {gridLines.map(minutes => (\n                      <div\n                        key={minutes}\n                        style={{\n                          position: 'absolute',\n                          left: (minutes - DAY_START) * pxPerMin,\n                          top: 0,\n                          bottom: 0,\n                          width: '1px',\n                          backgroundColor: minutes % 60 === 0 ? '#64748b' : '#cbd5e1',\n                          display: 'flex',\n                          alignItems: 'flex-end',\n                          justifyContent: 'center',\n                          paddingBottom: '2px',\n                          boxShadow: minutes % 60 === 0 ? '0 0 2px rgba(100,116,139,0.3)' : 'none'\n                        }}\n                      >\n                        {minutes % 60 === 0 && (\n                          <span style={{\n                            fontSize: '8px',\n                            color: '#475569',\n                            backgroundColor: 'rgba(255,255,255,0.9)',\n                            padding: '1px 3px',\n                            borderRadius: '2px',\n                            border: '1px solid #cbd5e1',\n                            fontWeight: '500',\n                            textShadow: '0 1px 1px rgba(255,255,255,0.8)',\n                            boxShadow: '0 1px 2px rgba(0,0,0,0.1)'\n                          }}>\n                            {toHHMM(minutes)}\n                          </span>\n                        )}\n                      </div>\n                    ))}\n                    \n                    {/* –õ–∏–Ω–∏—è \"—Å–µ–π—á–∞—Å\" –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ */}\n                    <div\n                      style={{\n                        position: 'absolute',\n                        left: nowLeft,\n                        top: 0,\n                        bottom: 0,\n                        width: '2px',\n                        background: 'linear-gradient(180deg, #ef4444 0%, #dc2626 100%)',\n                        zIndex: 10,\n                        boxShadow: '0 0 8px rgba(239,68,68,0.6), 0 0 4px rgba(239,68,68,0.8)'\n                      }}\n                    />\n                  </div>\n                </div>\n            </div>\n            \n            {/* –û–±–ª–∞—Å—Ç—å —Å –º–∞—à–∏–Ω–∞–º–∏ –∏ —Ä–µ–π—Å–∞–º–∏ */}\n            <div className=\"flex-1 overflow-y-auto\" style={{ maxHeight: 'calc(100vh - 200px)' }}>\n              <div className=\"flex\" style={{ minHeight: '100%' }}>\n              {/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü —Å –≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ –º–∞—à–∏–Ω–∞–º–∏ */}\n              <div \n                ref={driversRef}\n                className=\"flex-none bg-white sticky left-0 z-10\"\n                style={{ \n                  width: `${TOTAL_DRIVERS_WIDTH}px`, \n                  borderRight: '1px solid #e5e7eb',\n                  boxShadow: '2px 0 8px rgba(0,0,0,0.1)'\n                }}\n              >\n                {drivers.map((driver, index) => {\n                  const hasNoMachine = !driver.machineId || driver.machineId === '';\n                  const hasOvertime = checkDriverOvertime(driver.id);\n                  const machine = driver.machineId && driver.machineId !== '' ? machines.find(m => m.id === driver.machineId) : null;\n                  const layerCount = machine ? getLayerCount(machine.id) : 1;\n                  const flightHeight = laneH - 12;\n                  const layerSpacing = flightHeight + 6;\n                  const dynamicLaneH = layerCount === 1 ? laneH : Math.max(laneH, layerCount * layerSpacing + 12);\n                  \n                  return (\n                    <div key={driver.id} className=\"border-b border-gray-200 flex\" style={{ height: dynamicLaneH, boxSizing: 'border-box' }}>\n                      {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–¥–∏—Ç–µ–ª–µ */}\n                      <div \n                        className={`flex-none px-2 py-1 ${hasOvertime ? 'bg-red-100' : 'bg-white'} flex flex-col justify-center`} \n                        style={{ \n                          width: `${DRIVER_INFO_WIDTH}px`, \n                          borderRight: '1px solid #e5e7eb',\n                          boxSizing: 'border-box'\n                        }}\n                      >\n                        {/* –ò–º—è –≤–æ–¥–∏—Ç–µ–ª—è –≤ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ */}\n                        <div style={{ \n                          fontSize: '11px', \n                          fontWeight: '600', \n                          color: '#111827',\n                          lineHeight: '1.2',\n                          marginBottom: '2px'\n                        }}>\n                          {formatDriverName(driver.name)}\n                        </div>\n                        \n                        {/* –í—Ä–µ–º—è —Å–º–µ–Ω—ã (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏) */}\n                        <div style={{ \n                          fontSize: '9px', \n                          color: '#6b7280',\n                          lineHeight: '1.2'\n                        }}>\n                          {toHHMM(driver.shiftStart)} - {toHHMM(driver.shiftEnd)}\n                        </div>\n                      </div>\n                      \n                      {/* –ü–∞–Ω–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω—ã */}\n                      <div \n                        className={`flex-none px-2 py-1 ${hasNoMachine ? 'bg-red-100' : 'bg-white'} flex flex-col justify-center`} \n                        style={{ \n                          width: `${MACHINE_SELECT_WIDTH}px`,\n                          borderRight: '1px solid #e5e7eb',\n                          boxSizing: 'border-box'\n                        }}\n                      >\n                        <select\n                          value={driver.machineId || ''}\n                          onChange={(e) => handleDriverMachineChange(driver.id, e.target.value)}\n                          className=\"w-full text-xs border border-gray-300 rounded px-2 py-1 bg-white mb-1\"\n                          style={{ fontSize: '10px' }}\n                        >\n                          <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—à–∏–Ω—É</option>\n                          {machines.map(machine => (\n                            <option key={machine.id} value={machine.id}>\n                              {machine.name}\n                            </option>\n                          ))}\n                        </select>\n                        \n                        {/* –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã –∏–ª–∏ —Å—Ç–∞—Ç—É—Å */}\n                        <div style={{ fontSize: '9px', color: '#6b7280', lineHeight: '1.2' }}>\n                          {driver.machineId && driver.machineId !== '' \n                            ? machines.find(m => m.id === driver.machineId)?.name || '–ú–∞—à–∏–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'\n                            : '–ú–∞—à–∏–Ω–∞ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'\n                          }\n                        </div>\n                        \n                        {/* –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è */}\n                        {hasNoMachine && (\n                          <div className=\"text-xs text-red-600\" style={{ fontSize: '8px', lineHeight: '1.2' }}>\n                            ‚ö†Ô∏è –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–∞—à–∏–Ω—É\n                          </div>\n                        )}\n                      </div>\n                      \n                      {/* –ö–æ–ª–æ–Ω–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω—ã */}\n                      <div \n                        className=\"flex-none bg-white flex flex-col justify-center items-center gap-1\" \n                        style={{ \n                          width: `${SHIFT_TIME_WIDTH}px`,\n                          borderRight: '1px solid #e5e7eb',\n                          boxSizing: 'border-box',\n                          padding: '1px 2px'\n                        }}\n                      >\n                        {/* –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Å–º–µ–Ω—ã */}\n                        <input\n                          type=\"time\"\n                          value={toHHMM(getDriverShiftTime(driver.id).shiftStart)}\n                          onChange={(e) => {\n                            const [hours, minutes] = e.target.value.split(':').map(Number);\n                            updateDriverShiftTime(driver.id, 'shiftStart', hours * 60 + minutes);\n                          }}\n                          className=\"text-xs border border-gray-300 rounded bg-white\"\n                          style={{ \n                            fontSize: '9px', \n                            height: '16px', \n                            width: '65px',\n                            padding: '1px 3px',\n                            textAlign: 'center'\n                          }}\n                        />\n                        \n                        {/* –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–º–µ–Ω—ã */}\n                        <input\n                          type=\"time\"\n                          value={toHHMM(getDriverShiftTime(driver.id).shiftEnd)}\n                          onChange={(e) => {\n                            const [hours, minutes] = e.target.value.split(':').map(Number);\n                            updateDriverShiftTime(driver.id, 'shiftEnd', hours * 60 + minutes);\n                          }}\n                          className=\"text-xs border border-gray-300 rounded bg-white\"\n                          style={{ \n                            fontSize: '9px', \n                            height: '16px', \n                            width: '65px',\n                            padding: '1px 3px',\n                            textAlign: 'center'\n                          }}\n                        />\n                      </div>\n                      \n                      {/* –ö–æ–ª–æ–Ω–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–º–µ–Ω—ã */}\n                      <div \n                        className=\"flex-none px-1 py-1 bg-gray-50 flex items-center justify-center\" \n                        style={{ \n                          width: `${WORK_DURATION_WIDTH}px`,\n                          boxSizing: 'border-box'\n                        }}\n                      >\n                        <div className=\"text-center\">\n                          <div style={{ \n                            fontSize: '11px', \n                            fontWeight: '600', \n                            color: '#374151',\n                            lineHeight: '1.2'\n                          }}>\n                            {(() => {\n                              const shiftTime = getDriverShiftTime(driver.id);\n                              return calculateShiftDuration(shiftTime.shiftStart, shiftTime.shiftEnd);\n                            })()}\n                          </div>\n                          <div style={{ \n                            fontSize: '8px', \n                            color: '#6b7280',\n                            lineHeight: '1.2'\n                          }}>\n                            —á–∞—Å–æ–≤\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              \n              {/* –û–±–ª–∞—Å—Ç—å —Å —Ä–µ–π—Å–∞–º–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */}\n              <div \n                ref={mainRef}\n                className=\"flex-1 bg-gray-50 overflow-x-auto\"\n                style={{ boxShadow: 'inset 2px 0 8px rgba(0,0,0,0.05)' }}\n              >\n                <div style={{ width: totalWidth, minHeight: '100%' }}>\n                  {drivers.map((driver, index) => {\n                    const machine = driver.machineId && driver.machineId !== '' ? machines.find(m => m.id === driver.machineId) : null;\n                    const machineFlights = machine ? (flightsByMachine[machine.id] || []) : [];\n                    const layerCount = machine ? getLayerCount(machine.id) : 1;\n                    const flightHeight = laneH - 12;\n                    const layerSpacing = flightHeight + 6;\n                    const dynamicLaneH = layerCount === 1 ? laneH : Math.max(laneH, layerCount * layerSpacing + 12);\n                    \n                    return (\n                      <div key={driver.id} className=\"border-b border-gray-200\" style={{ height: dynamicLaneH, boxSizing: 'border-box' }}>\n                        <div style={{ position: 'relative', width: totalWidth, height: '100%', boxSizing: 'border-box' }}>\n                          {/* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ —Å–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ */}\n                          {gridLines.map(minutes => (\n                            <div\n                              key={minutes}\n                              style={{\n                                position: 'absolute',\n                                left: (minutes - DAY_START) * pxPerMin,\n                                top: 0,\n                                bottom: 0,\n                                width: '1px',\n                                backgroundColor: minutes % 60 === 0 ? '#9ca3af' : '#e5e7eb',\n                                opacity: 0.7,\n                                zIndex: 1\n                              }}\n                            />\n                          ))}\n                          \n                          {/* –°–º–µ–Ω–∞ –≤–æ–¥–∏—Ç–µ–ª—è (–Ω–µ–±–µ—Å–Ω–æ-–≥–æ–ª—É–±–æ–π —Ñ–æ–Ω) - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –≤—Ä–µ–º—è */}\n                          <div\n                            style={{\n                              position: 'absolute',\n                              left: (getDriverShiftTime(driver.id).shiftStart - DAY_START) * pxPerMin,\n                              top: 0,\n                              width: (getDriverShiftTime(driver.id).shiftEnd - getDriverShiftTime(driver.id).shiftStart) * pxPerMin,\n                              height: '100%',\n                              backgroundColor: '#87ceeb', // –ù–µ–±–µ—Å–Ω–æ-–≥–æ–ª—É–±–æ–π\n                              opacity: 0.15, // –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\n                              borderRadius: '2px',\n                              zIndex: 1\n                            }}\n                          />\n                          \n                          {/* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∑–æ—Ä–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ */}\n                          {timeGapInfo && timeGapInfo.machineId === machine?.id && activeFlight && (\n                            <>\n                              {/* –ó–∞–∑–æ—Ä —Å–ª–µ–≤–∞ –æ—Ç —Ä–µ–π—Å–∞ (–æ—Ç –Ω–∞—á–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è) */}\n                              {timeGapInfo.beforeGap && (\n                                <div\n                                  style={{\n                                    position: 'absolute',\n                                    left: (timeGapInfo.beforeGap.insertTime - DAY_START) * pxPerMin,\n                                    top: '50%',\n                                    transform: 'translateY(-50%)',\n                                    width: Math.max(30, timeGapInfo.beforeGap.gap * pxPerMin),\n                                    height: 10,\n                                    backgroundColor: timeGapInfo.beforeGap.gap < 25 \n                                      ? 'rgba(239, 68, 68, 0.15)' // –ö—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ < 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n                                      : 'rgba(107, 114, 128, 0.15)', // –°–µ—Ä—ã–π –µ—Å–ª–∏ >= 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n                                    border: timeGapInfo.beforeGap.gap < 25 \n                                      ? '1px dashed #ef4444' \n                                      : '1px dashed #6b7280',\n                                    borderRadius: '3px',\n                                    zIndex: 15,\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    fontSize: '8px',\n                                    color: timeGapInfo.beforeGap.gap < 25 ? '#dc2626' : '#374151',\n                                    fontWeight: '500'\n                                  }}\n                                >\n                                  {Math.floor(timeGapInfo.beforeGap.gap)}–º–∏–Ω\n                                </div>\n                              )}\n                              \n                              {/* –ó–∞–∑–æ—Ä —Å–ø—Ä–∞–≤–∞ –æ—Ç —Ä–µ–π—Å–∞ (–æ—Ç –∫–æ–Ω—Ü–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è) */}\n                              {timeGapInfo.afterGap && (\n                                <div\n                                  style={{\n                                    position: 'absolute',\n                                    left: (timeGapInfo.afterGap.insertTime - DAY_START) * pxPerMin,\n                                    top: '30%',\n                                    transform: 'translateY(-50%)',\n                                    width: Math.max(30, timeGapInfo.afterGap.gap * pxPerMin),\n                                    height: 10,\n                                    backgroundColor: timeGapInfo.afterGap.gap < 25 \n                                      ? 'rgba(239, 68, 68, 0.15)' // –ö—Ä–∞—Å–Ω—ã–π –µ—Å–ª–∏ < 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n                                      : 'rgba(107, 114, 128, 0.15)', // –°–µ—Ä—ã–π –µ—Å–ª–∏ >= 25 –º–∏–Ω (–±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)\n                                    border: timeGapInfo.afterGap.gap < 25 \n                                      ? '1px dashed #ef4444' \n                                      : '1px dashed #6b7280',\n                                    borderRadius: '3px',\n                                    zIndex: 15,\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    fontSize: '8px',\n                                    color: timeGapInfo.afterGap.gap < 25 ? '#dc2626' : '#374151',\n                                    fontWeight: '500'\n                                  }}\n                                >\n                                  {Math.floor(timeGapInfo.afterGap.gap)}–º–∏–Ω\n                                </div>\n                              )}\n                            </>\n                          )}\n                          \n                          {machine && (\n                            <DroppableMachineSlot\n                              machine={machine}\n                              laneH={dynamicLaneH}\n                              totalWidth={totalWidth}\n                            >\n                              {/* –ü–æ–ª–æ—Å–∫–∏ –¥–ª—è —Å–∫–æ–±–æ–∫-—Ü–µ–ø–æ—á–µ–∫ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏ */}\n                              {chainsByMachine[machine.id]?.map((chain, idx) => {\n                                const xPos = (chain.start - DAY_START) * pxPerMin;\n                                const xPosEnd = (chain.end - DAY_START) * pxPerMin;\n                                const width = Math.max(4, xPosEnd - xPos);\n                                const currentChainWindows = chainWindows[chain.chainId] || {};\n                                \n                                // –ü–æ–ª—É—á–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã —Ü–µ–ø–æ—á–∫–∏ –ø–æ —Å–ª–æ—è–º\n                                const layerBounds = getChainLayerBounds(chain.chainId, machine.id);\n                                \n                                return (\n                                  <div key={`chain-${machine.id}-${chain.chainId}-${idx}`}>\n                                    {/* –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –ø–æ–ª–æ—Å–∞ */}\n                                    <div \n                                      className=\"absolute border-2 border-purple-500\"\n                                      style={{\n                                        left: xPos,\n                                        width: width,\n                                        top: layerBounds.top, // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–ª–æ—è\n                                        height: layerBounds.height, // –í—ã—Å–æ—Ç–∞ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏\n                                        borderRadius: '4px',\n                                        backgroundColor: selectedChain === chain.chainId \n                                          ? 'rgba(239, 68, 68, 0.2)' // –ö—Ä–∞—Å–Ω–æ–≤–∞—Ç—ã–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π\n                                          : 'rgba(147, 51, 234, 0.1)', // –û–±—ã—á–Ω—ã–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π\n                                        border: selectedChain === chain.chainId \n                                          ? '2px solid #EF4444' // –ö—Ä–∞—Å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π\n                                          : '2px solid #9333EA', // –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞\n                                        zIndex: 1,\n                                        cursor: 'pointer'\n                                      }}\n                                      onClick={() => handleChainClick(chain.chainId)}\n                                      title=\"–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∫–æ–±–∫–∏, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ '–†–∞–∑–±–∏—Ç—å —Å–∫–æ–±–∫—É' –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\"\n                                    />\n                                    \n                                    {/* –û–∫–Ω–æ –ø–æ–≥—Ä—É–∑–∫–∏ - —Å–ª–µ–≤–∞ –Ω–∞ —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π –ø–æ–ª–æ—Å–µ */}\n                                    <div \n                                      style={{\n                                        position: 'absolute',\n                                        left: xPos - 2, // –ù–µ–º–Ω–æ–≥–æ –ª–µ–≤–µ–µ –Ω–∞—á–∞–ª–∞ –ø–æ–ª–æ—Å—ã\n                                        top: layerBounds.top + layerBounds.height / 2, // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ —Ü–µ–ø–æ—á–∫–∏\n                                        transform: 'translateY(-50%)',\n                                        height: 15, // –ú–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç—ã –ø–æ–ª–æ—Å—ã\n                                        minWidth: '40px',\n                                        backgroundColor: 'rgba(5, 150, 105, 0.7)', // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π\n                                        color: 'white',\n                                        borderRadius: '3px',\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        fontSize: '9px',\n                                        fontWeight: '600',\n                                        zIndex: 5,\n                                        border: '1px solid rgba(4, 120, 87, 0.8)'\n                                      }}\n                                    >\n                                      <select\n                                        value={currentChainWindows.loadingWindow || ''}\n                                        onChange={(e) => {\n                                          const newValue = e.target.value ? Number(e.target.value) : undefined;\n                                          setChainWindows(prev => ({\n                                            ...prev,\n                                            [chain.chainId]: {\n                                              ...prev[chain.chainId],\n                                              loadingWindow: newValue\n                                            }\n                                          }));\n                                        }}\n                                        style={{\n                                          backgroundColor: 'transparent',\n                                          border: 'none',\n                                          color: 'white',\n                                          fontSize: '9px',\n                                          fontWeight: '600',\n                                          outline: 'none',\n                                          cursor: 'pointer',\n                                          width: '100%',\n                                          textAlign: 'center'\n                                        }}\n                                      >\n                                        <option value=\"\" style={{ color: '#000' }}>‚Äî</option>\n                                        {Array.from({ length: 19 }, (_, i) => i + 1).map(num => (\n                                          <option key={num} value={num} style={{ color: '#000' }}>{num}</option>\n                                        ))}\n                                      </select>\n                                    </div>\n                                    \n                                    {/* –û–∫–Ω–æ —Ä–∞–∑–≥—Ä—É–∑–∫–∏ - —Å–ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π –ø–æ–ª–æ—Å–µ */}\n                                    <div \n                                      style={{\n                                        position: 'absolute',\n                                        left: xPos + width - 38, // –ù–µ–º–Ω–æ–≥–æ –ª–µ–≤–µ–µ –∫–æ–Ω—Ü–∞ –ø–æ–ª–æ—Å—ã (—à–∏—Ä–∏–Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ ~40px)\n                                        top: layerBounds.top + layerBounds.height / 2, // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ —Ü–µ–ø–æ—á–∫–∏\n                                        transform: 'translateY(-50%)',\n                                        height: 15, // –ú–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç—ã –ø–æ–ª–æ—Å—ã\n                                        minWidth: '40px',\n                                        backgroundColor: 'rgba(220, 38, 38, 0.7)',\n                                        color: 'white',\n                                        borderRadius: '3px',\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        fontSize: '9px',\n                                        fontWeight: '600',\n                                        zIndex: 5,\n                                        border: '1px solid #B91C1C'\n                                      }}\n                                    >\n                                      <select\n                                        value={currentChainWindows.unloadingWindow || ''}\n                                        onChange={(e) => {\n                                          const newValue = e.target.value ? Number(e.target.value) : undefined;\n                                          setChainWindows(prev => ({\n                                            ...prev,\n                                            [chain.chainId]: {\n                                              ...prev[chain.chainId],\n                                              unloadingWindow: newValue\n                                            }\n                                          }));\n                                        }}\n                                        style={{\n                                          backgroundColor: 'transparent',\n                                          border: 'none',\n                                          color: 'white',\n                                          fontSize: '9px',\n                                          fontWeight: '600',\n                                          outline: 'none',\n                                          cursor: 'pointer',\n                                          width: '100%',\n                                          textAlign: 'center'\n                                        }}\n                                      >\n                                        <option value=\"\" style={{ color: '#000' }}>‚Äî</option>\n                                        {[20, 21, 22, 23].map(num => (\n                                          <option key={num} value={num} style={{ color: '#000' }}>{num}</option>\n                                        ))}\n                                      </select>\n                                    </div>\n                                    \n                                    {/* –ù–æ–º–µ—Ä –∞–≤—Ç–æ–ª–∏—Ñ—Ç–∞ - –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ–ª–æ—Å—ã */}\n                                    {width > 100 && (() => {\n                                      // –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ–ª–∏—Ñ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–æ–π —Ü–µ–ø–æ—á–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω—ã\n                                      const defaultAutolift = chainAutolifts[chain.chainId] || getAutoliftFromMachine(chain.machineId);\n                                      \n                                      // –ï—Å–ª–∏ –∞–≤—Ç–æ–ª–∏—Ñ—Ç –Ω–µ –±—ã–ª –Ω–∞–∑–Ω–∞—á–µ–Ω —Ä–∞–Ω–µ–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º\n                                      if (!chainAutolifts[chain.chainId] && defaultAutolift) {\n                                        autoAssignAutolift(chain.chainId, chain.machineId);\n                                      }\n                                      \n                                      return (\n                                        <select\n                                          value={defaultAutolift}\n                                          onChange={(e) => {\n                                            const value = e.target.value;\n                                            setChainAutolifts(prev => ({\n                                              ...prev,\n                                              [chain.chainId]: value\n                                            }));\n                                          }}\n                                          style={{\n                                            position: 'absolute',\n                                            left: xPos + width / 2,\n                                            top: '50%',\n                                            transform: 'translate(-50%, -50%)',\n                                            fontSize: '9px',\n                                            color: selectedChain === chain.chainId ? '#DC2626' : '#8B5CF6',\n                                            fontWeight: '600',\n                                            backgroundColor: 'rgba(255, 255, 255, 0.95)',\n                                            border: `1px solid ${selectedChain === chain.chainId ? '#DC2626' : '#8B5CF6'}`,\n                                            borderRadius: '3px',\n                                            padding: '2px 4px',\n                                            minWidth: '60px',\n                                            maxWidth: '80px',\n                                            textAlign: 'center',\n                                            zIndex: 3,\n                                            outline: 'none',\n                                            cursor: 'pointer'\n                                          }}\n                                          onClick={(e) => e.stopPropagation()} // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–±–æ—Ä —Ü–µ–ø–æ—á–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø–æ–ª–µ\n                                        >\n                                          <option value=\"\" style={{ color: '#000' }}>‚Äî</option>\n                                          {(autolifts.length > 0 ? autolifts : ['133', '135', '136', '139', '140', '141', '149', '150', '151']).map(autolift => (\n                                            <option key={autolift} value={autolift} style={{ color: '#000' }}>\n                                              {autolift}\n                                            </option>\n                                          ))}\n                                        </select>\n                                      );\n                                    })()}\n                                  </div>\n                                );\n                              })}\n                              \n                              {/* –†–µ–π—Å—ã */}\n                              {machineFlights.map((flight, index) => {\n                                const left = (flight.loadStart - DAY_START) * pxPerMin;\n                                const width = Math.max(12, (flight.loadEnd - flight.loadStart) * pxPerMin);\n                                const isPending = pendingChanges.some(c => c.flightId === flight.id);\n                                const flightLayer = machine ? getFlightLayer(flight.id, machine.id) : 0;\n                                const totalLayers = machine ? getLayerCount(machine.id) : 1;\n                                \n                                // –†–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ\n                                const flightHeight = laneH - 12; // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É —Ä–µ–π—Å–∞\n                                let layerTop = 0;\n                                \n                                if (totalLayers === 1) {\n                                  // –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ–π, —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –≤ —Å—Ç—Ä–æ–∫–µ\n                                  layerTop = 0; // –ë—É–¥–µ—Ç —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ CSS (top: 50%, transform: translateY(-50%))\n                                } else {\n                                  // –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–µ–≤, —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ\n                                  const layerSpacing = flightHeight + 4; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏\n                                  const totalHeight = totalLayers * layerSpacing;\n                                  const centerY = dynamicLaneH / 2;\n                                  const startY = centerY - totalHeight / 2;\n                                  layerTop = startY + flightLayer * layerSpacing;\n                                }\n                                \n                                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Å–∫–æ–±–∫–µ (—Ü–µ–ø–æ—á–∫–µ)\n                                const flightsInSameChain = machineFlights.filter(f => f.chainId === flight.chainId);\n                                const indexInChain = flightsInSameChain.findIndex(f => f.id === flight.id);\n                                const chainLength = flightsInSameChain.length;\n                                \n                                let bracketPosition: 'start' | 'middle' | 'end' | 'single' = 'single';\n                                let showBracket = false;\n                                \n                                if (chainLength > 1 && flight.chainId && flight.chainId.trim() !== '') {\n                                  showBracket = true;\n                                  if (indexInChain === 0) {\n                                    bracketPosition = 'start';\n                                  } else if (indexInChain === chainLength - 1) {\n                                    bracketPosition = 'end';\n                                  } else {\n                                    bracketPosition = 'middle';\n                                  }\n                                }\n                                \n                                // –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–∞ –ø–æ–¥ —Ä–µ–π—Å–∞–º–∏ - –æ–Ω–∏ –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫—Ä–∞—è—Ö —Å–∫–æ–±–æ–∫\n                                let loadingWindow: number | undefined;\n                                let unloadingWindow: number | undefined;\n                                \n                                return (\n                                  <DraggableFlight\n                                    key={flight.id}\n                                    flight={flight}\n                                    left={left}\n                                    width={width}\n                                    laneH={laneH - 6} // –£–º–µ–Ω—å—à–∏–ª–∏ –æ—Ç—Å—Ç—É–ø: –±—ã–ª–æ laneH-12, —Å—Ç–∞–ª–æ laneH-6 –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã\n                                    fontPx={fontPx}\n                                    isAssigned={true}\n                                    isPending={isPending}\n                                    status={getFlightStatus(flight)}\n                                    showBracket={showBracket}\n                                    bracketPosition={bracketPosition}\n                                    loadingWindow={loadingWindow}\n                                    unloadingWindow={unloadingWindow}\n                                    onStatusChange={(status: 'completed' | 'in-progress' | 'planned') => updateFlightStatus(flight.flightNo, status)}\n                                    onClick={handleFlightClick}\n                                    isSelected={selectedFlights.has(flight.id)}\n                                    layerTop={layerTop}\n                                    useLayerPositioning={totalLayers > 1} // –í–∫–ª—é—á–∞–µ–º —Å–ª–æ–µ–≤–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ä–µ–π—Å–æ–≤\n                                  />\n                                );\n                              })}\n                            </DroppableMachineSlot>\n                          )}\n                          \n                          {/* –ï—Å–ª–∏ –≤–æ–¥–∏—Ç–µ–ª—é –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –º–∞—à–∏–Ω–∞, –Ω–æ –Ω—É–∂–Ω–∞ droppable –∑–æ–Ω–∞ */}\n                          {!machine && (\n                            <div\n                              style={{\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                right: 0,\n                                bottom: 0,\n                                backgroundColor: 'rgba(239, 68, 68, 0.1)',\n                                border: '2px dashed #ef4444',\n                                borderRadius: '4px',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                color: '#ef4444',\n                                fontSize: '9px', // –£–º–µ–Ω—å—à–∏–ª–∏ —Å 12px –¥–æ 9px\n                                fontWeight: 'bold',\n                                zIndex: 2\n                              }}\n                            >\n                              –ù–∞–∑–Ω–∞—á—å—Ç–µ –º–∞—à–∏–Ω—É –≤–æ–¥–∏—Ç–µ–ª—é\n                            </div>\n                          )}\n                          \n                          {/* –õ–∏–Ω–∏—è \"—Å–µ–π—á–∞—Å\" –¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ */}\n                          <div\n                            style={{\n                              position: 'absolute',\n                              left: nowLeft,\n                              top: 0,\n                              height: '100%',\n                              width: '2px',\n                              backgroundColor: '#ef4444',\n                              zIndex: 10\n                            }}\n                          />\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n              </div>\n            </div>\n          </div>\n\n      </div>\n      \n      {/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ */}\n      <div \n        className=\"fixed bottom-0 left-0 right-0 border-t-2 border-blue-300 bg-blue-50 z-40\"\n        style={{ \n          height: basementHeight,\n          background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)',\n          boxShadow: '0 -4px 8px rgba(0,0,0,0.1)',\n          borderColor: '#cbd5e1'\n        }}\n      >\n        {/* –•—ç–Ω–¥–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ */}\n        <div\n          className=\"w-full bg-blue-400 cursor-ns-resize hover:bg-blue-500 transition-colors flex items-center justify-center\"\n          style={{ height: '6px' }}\n          onMouseDown={(e) => {\n            setIsResizing(true);\n            const startY = e.clientY;\n            const startHeight = basementHeight;\n            \n            const handleMouseMove = (e: MouseEvent) => {\n              const deltaY = startY - e.clientY;\n              const newHeight = Math.max(80, Math.min(400, startHeight + deltaY));\n              setBasementHeight(newHeight);\n            };\n            \n            const handleMouseUp = () => {\n              setIsResizing(false);\n              document.removeEventListener('mousemove', handleMouseMove);\n              document.removeEventListener('mouseup', handleMouseUp);\n            };\n            \n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n          }}\n        >\n          <div className=\"w-12 h-1 bg-blue-600 rounded-full opacity-60\"></div>\n        </div>\n        \n        <div className=\"flex\" style={{ height: basementHeight - 6 }}>\n          {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–¥–≤–∞–ª–∞ */}\n          <div \n            className=\"flex-none p-3 flex items-center\"\n            style={{ \n              width: `${TOTAL_DRIVERS_WIDTH}px`, \n              borderRight: '2px solid #cbd5e1',\n              boxShadow: '2px 0 8px rgba(0,0,0,0.1)',\n              background: 'linear-gradient(135deg, #e3eef7 0%, #d7e8f0 100%)'\n            }}\n          >\n            <div className=\"text-sm font-semibold\" style={{ color: '#475569' }}>\n              –ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ä–µ–π—Å—ã ({arrangeUnassignedFlights.length})\n            </div>\n          </div>\n          \n          {/* –û–±–ª–∞—Å—Ç—å —Å –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ —Ä–µ–π—Å–∞–º–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */}\n          <div \n            ref={basementRef}\n            className=\"flex-1 overflow-auto\"\n            style={{ \n              boxShadow: 'inset 2px 0 8px rgba(0,0,0,0.05)',\n              background: '#f9fafb'\n            }}\n          >\n            <DroppableUnassigned\n              totalWidth={totalWidth}\n              height={arrangeUnassignedFlights.length > 0 \n                ? Math.max(basementHeight - 6, (Math.max(...arrangeUnassignedFlights.map(f => f.laneIndex)) + 1) * laneH)\n                : basementHeight - 6}\n            >\n              {/* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ —Å–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ */}\n              {gridLines.map(minutes => {\n                // –í—ã—á–∏—Å–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–π—Å–æ–≤\n                const maxLaneIndex = arrangeUnassignedFlights.length > 0 \n                  ? Math.max(...arrangeUnassignedFlights.map(f => f.laneIndex)) \n                  : 0;\n                const actualHeight = Math.max(basementHeight - 6, (maxLaneIndex + 1) * laneH);\n                \n                return (\n                <div\n                  key={`basement-grid-${minutes}`}\n                  style={{\n                    position: 'absolute',\n                    left: (minutes - DAY_START) * pxPerMin,\n                    top: 0,\n                    height: actualHeight,\n                    width: '1px',\n                    backgroundColor: minutes % 60 === 0 ? '#9ca3af' : '#e5e7eb',\n                    opacity: 0.7,\n                    zIndex: 1\n                  }}\n                />\n                );\n              })}\n              \n              {/* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ */}\n              {(() => {\n                // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä—è–¥–æ–≤ —Å —Ä–µ–π—Å–∞–º–∏\n                const maxLaneIndex = arrangeUnassignedFlights.length > 0 \n                  ? Math.max(...arrangeUnassignedFlights.map(f => f.laneIndex)) \n                  : 0;\n                const minLines = Math.floor((basementHeight - 6) / laneH) + 1;\n                const actualLines = Math.max(minLines, maxLaneIndex + 2); // +2 –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ —Å–Ω–∏–∑—É\n                \n                return Array.from({ length: actualLines }, (_, i) => (\n                  <div\n                    key={`basement-horizontal-${i}`}\n                    style={{\n                      position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: i * laneH,\n                    height: '1px',\n                    backgroundColor: '#e5e7eb',\n                    opacity: 0.5,\n                    zIndex: 1\n                  }}\n                />\n                ));\n              })()}\n              \n              {/* –ù–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ä–µ–π—Å—ã */}\n              {arrangeUnassignedFlights.map((flight) => {\n                const left = (flight.loadStart - DAY_START) * pxPerMin;\n                const width = Math.max(12, (flight.loadEnd - flight.loadStart) * pxPerMin);\n                const top = flight.laneIndex * laneH + (laneH - (laneH - 16)) / 2; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ä–µ–π—Å –≤ —Å—Ç—Ä–æ–∫–µ –∫–∞–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ\n                const isPending = pendingChanges.some(c => c.flightId === flight.id);\n                \n                return (\n                  <div\n                    key={flight.id}\n                    style={{\n                      position: 'absolute',\n                      left: left,\n                      top: top,\n                      width: width,\n                      height: laneH - 12 // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—ã—Å–æ—Ç—É –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ\n                    }}\n                  >\n                    <DraggableFlight\n                      flight={flight}\n                      left={0}\n                      width={width}\n                      laneH={laneH - 6} // –¢–∞–∫–∞—è –∂–µ –≤—ã—Å–æ—Ç–∞ –∫–∞–∫ —É –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ (—É–≤–µ–ª–∏—á–∏–ª–∏ —Å laneH-12)\n                      fontPx={fontPx}\n                      isAssigned={false}\n                      isPending={isPending}\n                      status={getFlightStatus(flight)}\n                      onStatusChange={(status: 'completed' | 'in-progress' | 'planned') => updateFlightStatus(flight.flightNo, status)}\n                      onClick={handleFlightClick}\n                      isSelected={selectedFlights.has(flight.id)}\n                    />\n                  </div>\n                );\n              })}\n              \n              {/* –õ–∏–Ω–∏—è \"—Å–µ–π—á–∞—Å\" –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ */}\n              <div\n                style={{\n                  position: 'absolute',\n                  left: nowLeft,\n                  top: 0,\n                  bottom: 0,\n                  width: '2px',\n                  backgroundColor: '#ef4444',\n                  zIndex: 10\n                }}\n              />\n            </DroppableUnassigned>\n          </div>\n        </div>\n      </div>\n      \n      {/* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º */}\n      <div className=\"flex-none bg-white border-t border-gray-200 px-4 py-2\"\n           style={{ marginBottom: `${basementHeight}px` }}>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"text-sm text-gray-600\">\n            –í—ã—Å–æ—Ç–∞ –ø–æ–¥–≤–∞–ª–∞: {basementHeight}px\n          </div>\n          <button\n            onClick={() => setBasementHeight(120)}\n            className=\"text-xs px-2 py-1 bg-gray-200 rounded hover:bg-gray-300\"\n          >\n            –°–±—Ä–æ—Å–∏—Ç—å\n          </button>\n        </div>\n      </div>\n      \n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ */}\n      {showSaveDialog && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999]\"\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: 9999\n          }}\n        >\n          <div className=\"bg-blue-50 rounded-lg shadow-2xl max-w-lg w-full mx-4 max-h-80 flex flex-col border-2 border-blue-300\" \n               style={{ backgroundColor: '#f0f8ff' }}>\n            <div className=\"px-4 py-3 border-b-2 border-blue-300 bg-gradient-to-r from-blue-100 to-blue-200 rounded-t-lg\">\n              <h3 className=\"text-sm font-semibold text-blue-900\">\n                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫—É\n              </h3>\n              <p className=\"text-xs text-blue-700 mt-1\">\n                –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ\n              </p>\n            </div>\n            \n            <div className=\"flex-1 overflow-y-auto px-4 py-3\" style={{ backgroundColor: '#f0f8ff' }}>\n              {pendingChanges.length === 0 ? (\n                <p className=\"text-blue-600 text-center py-6 text-sm\">\n                  –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è\n                </p>\n              ) : (\n                <div className=\"space-y-2\">\n                  {pendingChanges.map((change) => (\n                    <div\n                      key={change.id}\n                      className=\"flex items-center justify-between bg-white rounded-md p-2 border border-blue-200 shadow-sm\"\n                      style={{ backgroundColor: '#ffffff', borderColor: '#b3d9ff' }}\n                    >\n                      <div className=\"flex-1\">\n                        <span className=\"text-sm font-medium text-blue-900\">\n                          {change.flightNo}: {change.fromMachine} ‚Üí {change.toMachine}\n                        </span>\n                      </div>\n                      <button\n                        onClick={() => handleRemoveChange(change.id)}\n                        className=\"ml-2 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 border border-red-300 transition-colors\"\n                      >\n                        –û—Ç–º–µ–Ω–∏—Ç—å\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"px-4 py-3 border-t-2 border-blue-300 flex justify-end gap-2 bg-gradient-to-r from-blue-100 to-blue-200 rounded-b-lg\">\n              <button\n                onClick={handleCancelChanges}\n                className=\"px-3 py-1.5 text-sm font-semibold rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: '#e0f2fe',\n                  color: '#0c4a6e',\n                  borderColor: '#7dd3fc',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n              >\n                –û—Ç–º–µ–Ω–∞\n              </button>\n              <button\n                onClick={handleApplyChanges}\n                disabled={loading || pendingChanges.length === 0}\n                className=\"px-3 py-1.5 text-sm font-semibold rounded shadow-sm border transition-all duration-200\"\n                style={{\n                  backgroundColor: loading || pendingChanges.length === 0 ? '#f1f5f9' : '#e0f2fe',\n                  color: loading || pendingChanges.length === 0 ? '#64748b' : '#0c4a6e',\n                  borderColor: loading || pendingChanges.length === 0 ? '#cbd5e1' : '#7dd3fc',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n                  cursor: loading || pendingChanges.length === 0 ? 'not-allowed' : 'pointer'\n                }}\n              >\n                {loading ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–ü—Ä–∏–º–µ–Ω–∏—Ç—å'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* DragOverlay –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */}\n      <DragOverlay modifiers={[restrictToVerticalAxis]}>\n        {activeFlight && (\n          <DraggableFlight\n            flight={activeFlight}\n            left={0}\n            width={Math.max(12, (activeFlight.loadEnd - activeFlight.loadStart) * pxPerMin)}\n            laneH={laneH}\n            fontPx={fontPx}\n            isAssigned={!!activeFlight.vehicleId}\n            isPending={false}\n            status={getFlightStatus(activeFlight)}\n            onClick={handleFlightClick}\n            isSelected={selectedFlights.has(activeFlight.id)}\n          />\n        )}\n      </DragOverlay>\n      </div>\n    </DndContext>\n  );\n};\n\nexport default PlannerPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}