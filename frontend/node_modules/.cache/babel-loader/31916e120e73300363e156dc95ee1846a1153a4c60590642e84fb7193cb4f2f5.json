{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport const flightAPI = {\n  // Получить все рейсы\n  getFlights: async () => {\n    const response = await api.get('/flights');\n    return response.data;\n  },\n  // Добавить рейсы\n  addFlights: async flights => {\n    const response = await api.post('/flights', flights);\n    return response.data;\n  },\n  // Импорт из CSV\n  importCSV: async file => {\n    const formData = new FormData();\n    formData.append('file', file);\n    const response = await api.post('/flights/import-csv', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  },\n  // Обновить рейс\n  updateFlight: async (flightId, flight) => {\n    const response = await api.put(`/flights/${flightId}`, flight);\n    return response.data;\n  },\n  // Удалить рейс\n  deleteFlight: async flightId => {\n    await api.delete(`/flights/${flightId}`);\n  },\n  // Создать расписание скобок (новое автопланирование)\n  createBracketSchedule: async () => {\n    const response = await api.post('/brackets/create-schedule');\n    return response.data.flights || response.data;\n  },\n  // Планирование для выбранных рейсов\n  planBracketsForFlights: async flightIds => {\n    const response = await api.post('/brackets/plan-for-flights', flightIds);\n    return response.data;\n  },\n  // Сброс назначений\n  resetAssignments: async () => {\n    const response = await api.post('/assign/reset');\n    return response.data;\n  },\n  // Получить правила планирования скобок\n  getBracketRules: async () => {\n    const response = await api.get('/brackets/rules');\n    return response.data;\n  },\n  // Проверить валидность комбинации\n  validateBracketCombination: async combinations => {\n    const response = await api.post('/brackets/validate-combination', combinations);\n    return response.data;\n  },\n  // Автоназначение (старое, для совместимости)\n  autoAssign: async () => {\n    // Используем новое планирование скобок вместо старого автоназначения\n    const response = await api.post('/brackets/create-schedule');\n    const responseData = response.data;\n    if (responseData.flights) {\n      var _responseData$stats;\n      // Новый формат ответа с обёртками\n      return {\n        message: responseData.message || 'Скобки созданы успешно',\n        assigned_count: ((_responseData$stats = responseData.stats) === null || _responseData$stats === void 0 ? void 0 : _responseData$stats.assigned_flights) || responseData.flights.filter(f => f.vehicleId).length\n      };\n    } else {\n      // Старый формат - прямой массив рейсов\n      return {\n        message: 'Скобки созданы успешно',\n        assigned_count: responseData.filter(f => f.vehicleId).length\n      };\n    }\n  },\n  // Назначить рейс на машину\n  assignFlight: async (flightId, machineId) => {\n    const response = await api.post(`/assign/flight/${flightId}/machine/${machineId}`);\n    return response.data;\n  },\n  // Снять назначение рейса\n  unassignFlight: async flightId => {\n    const response = await api.delete(`/assign/flight/${flightId}`);\n    return response.data;\n  }\n};\nexport const machineAPI = {\n  // Получить все машины\n  getMachines: async () => {\n    const response = await api.get('/machines');\n    return response.data;\n  },\n  // Обновить водителя машины\n  updateDriver: async (machineId, driverName) => {\n    const response = await api.put(`/machines/${machineId}/driver`, {\n      driver: driverName\n    });\n    return response.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","flightAPI","getFlights","response","get","data","addFlights","flights","post","importCSV","file","formData","FormData","append","updateFlight","flightId","flight","put","deleteFlight","delete","createBracketSchedule","planBracketsForFlights","flightIds","resetAssignments","getBracketRules","validateBracketCombination","combinations","autoAssign","responseData","_responseData$stats","message","assigned_count","stats","assigned_flights","filter","f","vehicleId","length","assignFlight","machineId","unassignFlight","machineAPI","getMachines","updateDriver","driverName","driver"],"sources":["/Users/igordvoretskii/Documents/aeromar-python/frontend/src/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { Flight, Machine } from './types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport const flightAPI = {\n  // Получить все рейсы\n  getFlights: async (): Promise<Flight[]> => {\n    const response = await api.get('/flights');\n    return response.data;\n  },\n\n  // Добавить рейсы\n  addFlights: async (flights: Flight[]): Promise<Flight[]> => {\n    const response = await api.post('/flights', flights);\n    return response.data;\n  },\n\n  // Импорт из CSV\n  importCSV: async (file: File): Promise<Flight[]> => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    const response = await api.post('/flights/import-csv', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data;\n  },\n\n  // Обновить рейс\n  updateFlight: async (flightId: string, flight: Flight): Promise<Flight> => {\n    const response = await api.put(`/flights/${flightId}`, flight);\n    return response.data;\n  },\n\n  // Удалить рейс\n  deleteFlight: async (flightId: string): Promise<void> => {\n    await api.delete(`/flights/${flightId}`);\n  },\n\n  // Создать расписание скобок (новое автопланирование)\n  createBracketSchedule: async (): Promise<Flight[]> => {\n    const response = await api.post('/brackets/create-schedule');\n    return response.data.flights || response.data;\n  },\n\n  // Планирование для выбранных рейсов\n  planBracketsForFlights: async (flightIds: string[]): Promise<Flight[]> => {\n    const response = await api.post('/brackets/plan-for-flights', flightIds);\n    return response.data;\n  },\n\n  // Сброс назначений\n  resetAssignments: async (): Promise<{ message: string }> => {\n    const response = await api.post('/assign/reset');\n    return response.data;\n  },\n\n  // Получить правила планирования скобок\n  getBracketRules: async (): Promise<any> => {\n    const response = await api.get('/brackets/rules');\n    return response.data;\n  },\n\n  // Проверить валидность комбинации\n  validateBracketCombination: async (combinations: any): Promise<any> => {\n    const response = await api.post('/brackets/validate-combination', combinations);\n    return response.data;\n  },\n\n  // Автоназначение (старое, для совместимости)\n  autoAssign: async (): Promise<{ message: string; assigned_count: number }> => {\n    // Используем новое планирование скобок вместо старого автоназначения\n    const response = await api.post('/brackets/create-schedule');\n    const responseData = response.data;\n    \n    if (responseData.flights) {\n      // Новый формат ответа с обёртками\n      return { \n        message: responseData.message || 'Скобки созданы успешно', \n        assigned_count: responseData.stats?.assigned_flights || responseData.flights.filter((f: Flight) => f.vehicleId).length \n      };\n    } else {\n      // Старый формат - прямой массив рейсов\n      return { \n        message: 'Скобки созданы успешно', \n        assigned_count: responseData.filter((f: Flight) => f.vehicleId).length \n      };\n    }\n  },\n\n  // Назначить рейс на машину\n  assignFlight: async (flightId: string, machineId: string): Promise<Flight> => {\n    const response = await api.post(`/assign/flight/${flightId}/machine/${machineId}`);\n    return response.data;\n  },\n\n  // Снять назначение рейса\n  unassignFlight: async (flightId: string): Promise<Flight> => {\n    const response = await api.delete(`/assign/flight/${flightId}`);\n    return response.data;\n  },\n};\n\nexport const machineAPI = {\n  // Получить все машины\n  getMachines: async (): Promise<Machine[]> => {\n    const response = await api.get('/machines');\n    return response.data;\n  },\n\n  // Обновить водителя машины\n  updateDriver: async (machineId: string, driverName: string): Promise<Machine> => {\n    const response = await api.put(`/machines/${machineId}/driver`, { driver: driverName });\n    return response.data;\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}